<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مدرس شیمی کنکور | سیستم کامل آموزشی</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap">
    <style>
        :root {
            --midnight-blue: #0a192f;
            --deep-blue: #112240;
            --light-blue: #233554;
            --accent-blue: #64ffda;
            --accent-purple: #9d4edd;
            --accent-red: #ff6b6b;
            --accent-green: #51cf66;
            --accent-yellow: #ffd43b;
            --accent-orange: #ff922b;
            --text-primary: #e6f1ff;
            --text-secondary: #a8b2d1;
            --text-muted: #8892b0;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: var(--midnight-blue);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* نوار ناوبری */
        header {
            background-color: var(--deep-blue);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent-blue);
            display: flex;
            align-items: center;
        }

        .logo i {
            margin-left: 10px;
            font-size: 2rem;
        }

        .logo span {
            color: var(--accent-purple);
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-right: 15px;
        }

        .nav-links a {
            color: var(--text-primary);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            position: relative;
            padding: 5px 0;
            font-size: 0.85rem;
        }

        .nav-links a:hover {
            color: var(--accent-blue);
        }

        .mobile-menu-btn {
            display: none;
            font-size: 1.5rem;
            background: none;
            border: none;
            color: var(--text-primary);
            cursor: pointer;
        }

        /* صفحات */
        .page {
            display: none;
            padding-top: 100px;
            min-height: 100vh;
        }

        .page.active {
            display: block;
        }

        /* صفحه اصلی */
        .hero {
            padding: 150px 0 80px;
            background: linear-gradient(135deg, var(--midnight-blue) 0%, var(--deep-blue) 100%);
            text-align: center;
        }

        .teacher-profile {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .teacher-photo {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-purple) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            color: white;
            box-shadow: 0 10px 30px rgba(100, 255, 218, 0.3);
        }

        /* بخش‌های اصلی */
        .section-title {
            font-size: 2rem;
            color: var(--accent-blue);
            margin-bottom: 40px;
            text-align: center;
            position: relative;
        }

        .section-title::after {
            content: '';
            display: block;
            width: 70px;
            height: 3px;
            background-color: var(--accent-blue);
            margin: 10px auto;
        }

        /* سیستم ثبت نام/ورود */
        .auth-section {
            max-width: 500px;
            margin: 50px auto;
            background-color: var(--deep-blue);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--light-blue);
        }

        .auth-tab {
            flex: 1;
            text-align: center;
            padding: 15px;
            cursor: pointer;
            transition: var(--transition);
            font-weight: 500;
            color: var(--text-secondary);
            border-bottom: 3px solid transparent;
        }

        .auth-tab.active {
            color: var(--accent-blue);
            border-bottom: 3px solid var(--accent-blue);
        }

        .auth-form {
            display: none;
        }

        .auth-form.active {
            display: block;
        }

        /* پنل کاربری */
        .user-panel {
            background-color: var(--deep-blue);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-blue);
        }

        .user-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-blue) 0%, var(--accent-purple) 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
        }

        /* پخش‌کننده ویدیو */
        .video-player-container {
            background-color: var(--deep-blue);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .video-player {
            width: 100%;
            aspect-ratio: 16/9;
            background-color: #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .video-player video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .video-playlist {
            margin-top: 30px;
        }

        .playlist-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background-color: var(--light-blue);
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .playlist-item:hover {
            background-color: rgba(100, 255, 218, 0.1);
        }

        .playlist-item.active {
            background-color: rgba(100, 255, 218, 0.2);
            border-right: 3px solid var(--accent-blue);
        }

        /* بخش آپلود ویدیو */
        .upload-section {
            background-color: var(--deep-blue);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .upload-area {
            border: 3px dashed var(--accent-blue);
            border-radius: 10px;
            padding: 60px 20px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            transition: var(--transition);
        }

        .upload-area:hover {
            background-color: rgba(100, 255, 218, 0.05);
        }

        /* کارت‌ها */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
        }

        .card {
            background-color: var(--deep-blue);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .card-header {
            height: 180px;
            background-color: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--accent-blue);
        }

        .card-content {
            padding: 25px;
        }

        .card-content h3 {
            color: var(--accent-blue);
            margin-bottom: 15px;
            font-size: 1.4rem;
        }

        .card-content p {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .btn {
            display: inline-block;
            background-color: var(--accent-purple);
            color: white;
            padding: 12px 25px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
            border: none;
            cursor: pointer;
        }

        .btn:hover {
            background-color: var(--accent-blue);
            color: var(--deep-blue);
        }

        /* محاسبه جرم مولی تمام عناصر */
        .all-elements-calculator {
            background-color: var(--deep-blue);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .elements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 30px;
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
        }

        .element-item {
            background-color: var(--light-blue);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
        }

        .element-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.2);
        }

        .element-symbol {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-blue);
            margin-bottom: 5px;
        }

        /* جدول تناوبی */
        .full-periodic-table {
            background-color: var(--deep-blue);
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            overflow-x: auto;
        }

        .table-container {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            gap: 4px;
            margin-bottom: 20px;
            min-width: 1200px;
        }

        .periodic-element {
            border-radius: 5px;
            padding: 12px 5px;
            text-align: center;
            font-size: 0.8rem;
            transition: var(--transition);
            cursor: pointer;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .periodic-element:hover {
            transform: scale(1.08);
            box-shadow: 0 0 15px rgba(100, 255, 218, 0.7);
            z-index: 10;
        }

        .element-image {
            width: 30px;
            height: 30px;
            margin: 0 auto 5px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: var(--text-primary);
        }

        /* رنگ‌بندی گروه‌های جدول تناوبی */
        .alkali-metal { background-color: #ff6b6b; }
        .alkaline-earth { background-color: #ffa726; }
        .transition-metal { background-color: #42a5f5; }
        .basic-metal { background-color: #66bb6a; }
        .metalloid { background-color: #ab47bc; }
        .nonmetal { background-color: #5c6bc0; }
        .halogen { background-color: #ffca28; color: #000; }
        .noble-gas { background-color: #26c6da; }
        .lanthanide { background-color: #ff8a65; }
        .actinide { background-color: #ba68c8; }

        /* واکنش‌های مهم */
        .important-reactions {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .reaction-card {
            background-color: var(--deep-blue);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
            border-top: 4px solid var(--accent-green);
        }

        .reaction-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .reaction-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .reaction-equation {
            font-family: monospace;
            font-size: 1.8rem;
            color: var(--accent-yellow);
            background-color: rgba(255, 212, 59, 0.1);
            padding: 10px 15px;
            border-radius: 8px;
            text-align: center;
            margin: 15px 0;
        }

        /* رفع اشکال */
        .help-section {
            background-color: var(--deep-blue);
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 40px;
        }

        .help-form {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            color: var(--accent-blue);
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 15px;
            background-color: var(--light-blue);
            border: none;
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--accent-blue);
        }

        textarea.form-control {
            min-height: 150px;
            resize: vertical;
        }

        .submit-btn {
            background-color: var(--accent-purple);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: block;
            width: 100%;
        }

        .submit-btn:hover {
            background-color: var(--accent-blue);
            color: var(--deep-blue);
        }

        .help-info {
            background-color: rgba(100, 255, 218, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            border-right: 3px solid var(--accent-blue);
        }

        /* صفحه جزوات */
        .handouts-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .handout-card {
            background-color: var(--deep-blue);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .handout-header {
            height: 200px;
            background-color: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            color: var(--accent-blue);
        }

        .handout-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* صفحه نمونه سوالات */
        .questions-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 30px;
        }

        .question-card {
            background-color: var(--deep-blue);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
            border-top: 4px solid var(--accent-green);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        /* صفحه آزمون آنلاین */
        .quiz-container {
            background-color: var(--deep-blue);
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 50px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .quiz-progress {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--light-blue);
        }

        .question-box {
            background-color: var(--light-blue);
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .option {
            background-color: var(--deep-blue);
            padding: 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
        }

        .option:hover {
            background-color: rgba(100, 255, 218, 0.1);
            border-color: var(--accent-blue);
        }

        .option.selected {
            background-color: rgba(100, 255, 218, 0.2);
            border-color: var(--accent-blue);
        }

        .quiz-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .result-box {
            display: none;
            background: linear-gradient(135deg, var(--deep-blue) 0%, var(--midnight-blue) 100%);
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 50px;
            border: 2px solid var(--accent-blue);
        }

        /* صفحه ویدیوهای آموزشی */
        .videos-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 30px;
        }

        .video-card {
            background-color: var(--deep-blue);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .video-placeholder {
            height: 220px;
            background-color: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: var(--accent-red);
        }

        .video-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        /* صفحه عکس کلاس‌ها */
        .gallery-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        .gallery-item {
            background-color: var(--deep-blue);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .gallery-image {
            height: 250px;
            background-color: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--accent-yellow);
        }

        /* فوتر */
        footer {
            background-color: var(--deep-blue);
            padding: 50px 0 20px;
            border-top: 1px solid var(--light-blue);
            margin-top: 50px;
        }

        .social-links {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .social-link {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            color: var(--accent-blue);
            font-size: 1.3rem;
            transition: var(--transition);
            text-decoration: none;
        }

        .social-link:hover {
            background-color: var(--accent-blue);
            color: var(--deep-blue);
            transform: translateY(-5px);
        }

        .copyright {
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
            padding-top: 20px;
            border-top: 1px solid rgba(136, 146, 176, 0.2);
        }

        /* مدال عنصر */
        .element-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: var(--deep-blue);
            width: 90%;
            max-width: 800px;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 2rem;
            color: var(--accent-red);
            cursor: pointer;
            background: none;
            border: none;
        }

        /* رسپانسیو */
        @media (max-width: 1200px) {
            .table-container {
                grid-template-columns: repeat(9, 1fr);
            }
        }

        @media (max-width: 992px) {
            .teacher-profile {
                flex-direction: column;
                text-align: center;
            }
            
            .card-grid,
            .handouts-container,
            .questions-container,
            .videos-container,
            .gallery-container {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .nav-links {
                position: fixed;
                top: 70px;
                right: -100%;
                flex-direction: column;
                background-color: var(--deep-blue);
                width: 100%;
                text-align: center;
                transition: 0.5s;
                box-shadow: 0 10px 27px rgba(0, 0, 0, 0.2);
                padding: 20px 0;
                border-top: 1px solid var(--light-blue);
            }

            .nav-links.active {
                right: 0;
            }

            .nav-links li {
                margin: 15px 0;
            }

            .mobile-menu-btn {
                display: block;
            }
            
            .table-container {
                grid-template-columns: repeat(6, 1fr);
            }
            
            .quiz-container,
            .result-box {
                padding: 20px;
            }
            
            .quiz-controls {
                flex-direction: column;
                gap: 15px;
            }
            
            .auth-section {
                padding: 20px;
            }
        }

        /* استایل‌های جدید برای امکانات اضافه شده */
        .admin-panel-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--accent-purple);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            z-index: 1000;
            font-family: 'Vazirmatn';
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(157, 78, 221, 0.3);
        }

        .admin-panel-btn:hover {
            background: var(--accent-blue);
            color: var(--midnight-blue);
        }

        .quick-action-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 5px;
            padding: 8px 15px;
            border-radius: 6px;
            font-size: 0.8rem;
        }

        .whatsapp-btn {
            background: #25D366;
            color: white;
        }

        .sms-btn {
            background: #2196F3;
            color: white;
        }

        .reaction-category {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin: 5px;
        }

        .oxidation { background: #FF5252; color: white; }
        .acid-base { background: #4CAF50; color: white; }
        .substitution { background: #FF9800; color: white; }
        .decomposition { background: #9C27B0; color: white; }
        .combination { background: #2196F3; color: white; }

        .precipitation-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .precipitation-table th,
        .precipitation-table td {
            border: 1px solid var(--light-blue);
            padding: 12px;
            text-align: center;
        }

        .precipitation-table th {
            background: var(--light-blue);
            color: var(--accent-blue);
        }

        .precipitation-table tr:nth-child(even) {
            background: rgba(255,255,255,0.05);
        }

        .color-badge {
            display: inline-block;
            width: 20px;
            height: 20px;
            border-radius: 4px;
            vertical-align: middle;
            margin-left: 8px;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .formula-box {
            background: var(--light-blue);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-right: 4px solid var(--accent-yellow);
        }

        .compound-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .compound-item {
            background: var(--light-blue);
            padding: 15px;
            border-radius: 8px;
            transition: var(--transition);
        }

        .compound-item:hover {
            transform: translateY(-3px);
            background: rgba(100, 255, 218, 0.1);
        }

        .test-questions {
            background: var(--light-blue);
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .question-item {
            margin: 15px 0;
            padding: 15px;
            background: var(--deep-blue);
            border-radius: 8px;
        }

        .solution {
            background: rgba(100, 255, 218, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-right: 3px solid var(--accent-blue);
        }

        .chapter-filter {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
        }

        .chapter-btn {
            background: var(--light-blue);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            color: var(--text-primary);
            cursor: pointer;
            transition: var(--transition);
        }

        .chapter-btn.active {
            background: var(--accent-blue);
            color: var(--midnight-blue);
        }

        .chapter-btn:hover {
            background: var(--accent-purple);
            color: white;
        }

        .periodic-table-note {
            background: rgba(255, 193, 7, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-right: 3px solid var(--accent-yellow);
        }

        /* استایل‌های جدید برای امکانات اضافه شده */
        .user-dashboard {
            background: linear-gradient(135deg, var(--deep-blue) 0%, var(--midnight-blue) 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--light-blue);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card i {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--accent-blue);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-green);
        }

        .stat-label {
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .dashboard-features {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--light-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin: 0 auto 10px;
            color: var(--accent-blue);
        }

        .mobile-optimized {
            width: 100%;
            max-width: 100%;
            overflow-x: hidden;
        }

        .site-features-list {
            background: var(--deep-blue);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--light-blue);
            border-radius: 10px;
            transition: var(--transition);
        }

        .feature-item:hover {
            transform: translateY(-5px);
            background: rgba(100, 255, 218, 0.1);
        }

        .feature-item i {
            font-size: 1.8rem;
            color: var(--accent-blue);
            min-width: 40px;
        }

        .home-features {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 20px;
            margin: 40px 0;
        }

        .home-feature {
            text-align: center;
            padding: 20px 10px;
            background: var(--deep-blue);
            border-radius: 10px;
            transition: var(--transition);
        }

        .home-feature:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(100, 255, 218, 0.1);
        }

        .home-feature i {
            font-size: 2.5rem;
            color: var(--accent-blue);
            margin-bottom: 10px;
        }

        .video-analysis-section {
            background: var(--deep-blue);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .analysis-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .analysis-card {
            background: var(--light-blue);
            padding: 20px;
            border-radius: 10px;
        }

        .analysis-card h4 {
            color: var(--accent-blue);
            margin-bottom: 15px;
        }

        .progress-bar {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: var(--accent-green);
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- نوار ناوبری -->
    <header>
        <div class="container">
            <nav>
                <div class="logo">
                    <i class="fas fa-atom"></i>
                    شیمی‌<span>پژوه</span>
                </div>
                <ul class="nav-links">
                    <li><a href="#" onclick="showPage('home')">خانه</a></li>
                    <li><a href="#" onclick="showPage('auth')">ثبت نام / ورود</a></li>
                    <li><a href="#" onclick="showPage('dashboard')">پنل کاربری</a></li>
                    <li><a href="#" onclick="showPage('elements')">جدول تناوبی</a></li>
                    <li><a href="#" onclick="showPage('molar-mass')">جرم مولی</a></li>
                    <li><a href="#" onclick="showPage('reactions')">واکنش‌ها</a></li>
                    <li><a href="#" onclick="showPage('handouts')">جزوات</a></li>
                    <li><a href="#" onclick="showPage('questions')">نمونه سوالات</a></li>
                    <li><a href="#" onclick="showPage('quiz')">آزمون آنلاین</a></li>
                    <li><a href="#" onclick="showPage('videos')">ویدیوها</a></li>
                    <li><a href="#" onclick="showPage('gallery')">عکس کلاس‌ها</a></li>
                    <li><a href="#" onclick="showPage('help')">رفع اشکال</a></li>
                    <li><a href="#" onclick="showPage('video-analysis')">تحلیل آزمون</a></li>
                </ul>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- صفحه اصلی -->
    <section id="home" class="page active">
        <div class="hero">
            <div class="container">
                <h1 style="font-size: 3rem; color: var(--accent-blue); margin-bottom: 20px;">مدرس تخصصی شیمی کنکور</h1>
                <p style="font-size: 1.3rem; color: var(--text-secondary); max-width: 800px; margin: 0 auto 40px;">
                    با بیش از ۱۲ سال تجربه تدریس و موفقیت صدها دانش‌آموز در کنکور سراسری
                </p>
                
                <div class="teacher-profile">
                    <div class="teacher-photo">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <div class="teacher-info" style="max-width: 600px; text-align: right;">
                        <h2 style="color: var(--accent-blue); margin-bottom: 20px; font-size: 2.2rem;">دکتر علی احمدی</h2>
                        <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 15px;">دکترای شیمی آلی از دانشگاه تهران با رتبه برتر کنکور ۱۳۸۸</p>
                        <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 15px;">مؤلف ۵ جلد کتاب کمک‌آموزشی شیمی کنکور</p>
                        <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 15px;">مدرس دوره‌های آنلاین با بیش از ۳,۰۰۰ دانش‌آموز</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- آیکون تمام ویژگی‌های سایت در صفحه اصلی -->
            <h2 class="section-title">تمام امکانات سایت</h2>
            <div class="home-features">
                <div class="home-feature" onclick="showPage('dashboard')">
                    <i class="fas fa-user-circle"></i>
                    <p>پنل کاربری</p>
                </div>
                <div class="home-feature" onclick="showPage('elements')">
                    <i class="fas fa-table"></i>
                    <p>جدول تناوبی</p>
                </div>
                <div class="home-feature" onclick="showPage('molar-mass')">
                    <i class="fas fa-calculator"></i>
                    <p>محاسبه جرم مولی</p>
                </div>
                <div class="home-feature" onclick="showPage('reactions')">
                    <i class="fas fa-vial"></i>
                    <p>واکنش‌های مهم</p>
                </div>
                <div class="home-feature" onclick="showPage('handouts')">
                    <i class="fas fa-book"></i>
                    <p>جزوات آموزشی</p>
                </div>
                <div class="home-feature" onclick="showPage('questions')">
                    <i class="fas fa-question-circle"></i>
                    <p>نمونه سوالات</p>
                </div>
                <div class="home-feature" onclick="showPage('quiz')">
                    <i class="fas fa-graduation-cap"></i>
                    <p>آزمون آنلاین</p>
                </div>
                <div class="home-feature" onclick="showPage('videos')">
                    <i class="fas fa-video"></i>
                    <p>ویدیوهای آموزشی</p>
                </div>
                <div class="home-feature" onclick="showPage('gallery')">
                    <i class="fas fa-images"></i>
                    <p>عکس کلاس‌ها</p>
                </div>
                <div class="home-feature" onclick="showPage('help')">
                    <i class="fas fa-question"></i>
                    <p>رفع اشکال</p>
                </div>
                <div class="home-feature" onclick="showPage('video-analysis')">
                    <i class="fas fa-chart-line"></i>
                    <p>تحلیل آزمون</p>
                </div>
                <div class="home-feature" onclick="showPage('auth')">
                    <i class="fas fa-sign-in-alt"></i>
                    <p>ثبت نام/ورود</p>
                </div>
            </div>

            <!-- کارت‌های اصلی سایت -->
            <h2 class="section-title">خدمات آموزشی</h2>
            <div class="card-grid">
                <!-- کارت‌های اصلی سایت -->
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="card-content">
                        <h3>ثبت نام در سایت</h3>
                        <p>با ثبت نام در سایت به تمام محتوای آموزشی دسترسی کامل داشته باشید</p>
                        <a href="#" onclick="showPage('auth')" class="btn">ثبت نام / ورود</a>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-video"></i>
                    </div>
                    <div class="card-content">
                        <h3>ویدیوهای آموزشی</h3>
                        <p>تماشای آنلاین ویدیوهای آموزشی با کیفیت بالا</p>
                        <a href="#" onclick="showPage('videos')" class="btn">مشاهده ویدیوها</a>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <i class="fas fa-table"></i>
                    </div>
                    <div class="card-content">
                        <h3>جدول تناوبی کامل</h3>
                        <p>جدول تناوبی عناصر ۱ تا ۱۱۸ با اطلاعات کامل هر عنصر</p>
                        <a href="#" onclick="showPage('elements')" class="btn">مشاهده جدول</a>
                    </div>
                </div>
            </div>

            <!-- لیست فهرست تمام قابلیت‌های سایت -->
            <div class="site-features-list">
                <h2 class="section-title">فهرست کامل امکانات سایت</h2>
                <div class="features-grid">
                    <div class="feature-item">
                        <i class="fas fa-user-cog"></i>
                        <div>
                            <h4>پنل کاربری پیشرفته</h4>
                            <p>مدیریت شخصی، پیگیری پیشرفت تحصیلی، مشاهده نمرات</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-table"></i>
                        <div>
                            <h4>جدول تناوبی ۱-۱۱۸</h4>
                            <p>جدول کامل عناصر با اطلاعات تخصصی هر عنصر</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-calculator"></i>
                        <div>
                            <h4>محاسبه جرم مولی</h4>
                            <p>محاسبه آنلاین جرم مولی تمام عناصر و ترکیبات</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-vial"></i>
                        <div>
                            <h4>واکنش‌های مهم شیمی</h4>
                            <p>کامل‌ترین بانک واکنش‌های کنکوری</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-book"></i>
                        <div>
                            <h4>جزوات آموزشی</h4>
                            <p>جزوات کامل هر فصل به صورت طبقه‌بندی شده</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-question-circle"></i>
                        <div>
                            <h4>نمونه سوالات</h4>
                            <p>سوالات کنکور سال‌های گذشته با پاسخ تشریحی</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-graduation-cap"></i>
                        <div>
                            <h4>آزمون آنلاین</h4>
                            <p>آزمون‌های زمان‌دار شبیه‌سازی کنکور</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-video"></i>
                        <div>
                            <h4>ویدیوهای آموزشی</h4>
                            <p>آموزش مفهومی تمام مباحث با کیفیت HD</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-images"></i>
                        <div>
                            <h4>گالری تصاویر</h4>
                            <p>عکس‌های کلاس‌ها و کارگاه‌های آموزشی</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-question"></i>
                        <div>
                            <h4>سیستم رفع اشکال</h4>
                            <p>پرسش و پاسخ با مدرس و پاسخگویی سریع</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-chart-line"></i>
                        <div>
                            <h4>تحلیل ویدیویی آزمون</h4>
                            <p>تحلیل تخصصی آزمون‌های قلمچی</p>
                        </div>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-mobile-alt"></i>
                        <div>
                            <h4>سازگاری با موبایل</h4>
                            <p>طراحی کاملاً واکنش‌گرا برای استفاده در موبایل</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- صفحه پنل کاربری -->
    <section id="dashboard" class="page">
        <div class="container">
            <h2 class="section-title">پنل کاربری دانش‌آموز</h2>
            <div class="user-dashboard">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user-graduate"></i>
                    </div>
                    <div>
                        <h2 id="dashboard-name" style="color: var(--accent-blue);">دانش‌آموز عزیز</h2>
                        <p id="dashboard-grade" style="color: var(--text-secondary);">لطفاً وارد حساب کاربری خود شوید</p>
                        <p id="dashboard-date" style="color: var(--text-muted); font-size: 0.9rem;">
                            <i class="fas fa-calendar"></i> آخرین بازدید: -
                        </p>
                    </div>
                </div>
                
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <i class="fas fa-play-circle"></i>
                        <div class="stat-number" id="stat-videos">0</div>
                        <div class="stat-label">ویدیوهای مشاهده شده</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-graduation-cap"></i>
                        <div class="stat-number" id="stat-quizzes">0</div>
                        <div class="stat-label">آزمون‌های انجام شده</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-chart-line"></i>
                        <div class="stat-number" id="stat-score">0</div>
                        <div class="stat-label">امتیاز کل</div>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-percentage"></i>
                        <div class="stat-number" id="stat-percentage">0%</div>
                        <div class="stat-label">میانگین نمرات</div>
                    </div>
                </div>
                
                <h3 style="color: var(--accent-blue); margin: 30px 0 20px;">دسترسی سریع</h3>
                <div class="dashboard-features">
                    <div onclick="showPage('videos')">
                        <div class="feature-icon">
                            <i class="fas fa-video"></i>
                        </div>
                        <p style="text-align: center; margin-top: 5px;">ویدیوها</p>
                    </div>
                    <div onclick="showPage('quiz')">
                        <div class="feature-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <p style="text-align: center; margin-top: 5px;">آزمون</p>
                    </div>
                    <div onclick="showPage('questions')">
                        <div class="feature-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <p style="text-align: center; margin-top: 5px;">سوالات</p>
                    </div>
                    <div onclick="showPage('handouts')">
                        <div class="feature-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <p style="text-align: center; margin-top: 5px;">جزوات</p>
                    </div>
                    <div onclick="showPage('video-analysis')">
                        <div class="feature-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <p style="text-align: center; margin-top: 5px;">تحلیل آزمون</p>
                    </div>
                    <div onclick="showPage('help')">
                        <div class="feature-icon">
                            <i class="fas fa-question"></i>
                        </div>
                        <p style="text-align: center; margin-top: 5px;">رفع اشکال</p>
                    </div>
                </div>
                
                <div style="margin-top: 30px; text-align: center;">
                    <button class="btn" onclick="showPage('auth')" id="dashboard-login-btn">
                        <i class="fas fa-sign-in-alt"></i> ورود به حساب کاربری
                    </button>
                    <button class="btn" onclick="logout()" id="dashboard-logout-btn" style="display: none; margin-right: 15px;">
                        <i class="fas fa-sign-out-alt"></i> خروج از حساب
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- صفحه تحلیل ویدیویی آزمون‌های قلمچی -->
    <section id="video-analysis" class="page">
        <div class="container">
            <h2 class="section-title">تحلیل ویدیویی آزمون‌های قلمچی</h2>
            
            <div class="video-analysis-section">
                <div class="video-player-container">
                    <h3 id="analysis-video-title" style="color: var(--accent-blue); margin-bottom: 20px;">تحلیل آزمون قلمچی - آذر ۱۴۰۲</h3>
                    <div class="video-player">
                        <video id="analysis-video" controls poster="https://via.placeholder.com/800x450/112240/64ffda?text=Analysis+Video">
                            <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4" type="video/mp4">
                            مرورگر شما از پخش ویدیو پشتیبانی نمی‌کند.
                        </video>
                    </div>
                </div>
                
                <div class="analysis-grid">
                    <div class="analysis-card">
                        <h4>آمار آزمون</h4>
                        <p>تاریخ برگزاری: آذر ۱۴۰۲</p>
                        <p>تعداد شرکت‌کنندگان: ۴۵,۰۰۰ نفر</p>
                        <p>میانگین درصد: ۴۸.۵%</p>
                        <p>سوالات چالشی: ۷ سوال</p>
                    </div>
                    <div class="analysis-card">
                        <h4>نمودار درصدها</h4>
                        <div style="margin-top: 15px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>آسان (۰-۲۰٪)</span>
                                <span>۳۵٪</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 35%"></div>
                            </div>
                        </div>
                        <div style="margin-top: 10px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>متوسط (۲۰-۵۰٪)</span>
                                <span>۴۰٪</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 40%"></div>
                            </div>
                        </div>
                        <div style="margin-top: 10px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                <span>سخت (۵۰-۱۰۰٪)</span>
                                <span>۲۵٪</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress" style="width: 25%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="analysis-card">
                        <h4>مباحث پرتکرار</h4>
                        <ul style="color: var(--text-secondary); padding-right: 20px;">
                            <li>استوکیومتری (۴ سوال)</li>
                            <li>اسید و باز (۳ سوال)</li>
                            <li>الکتروشیمی (۳ سوال)</li>
                            <li>شیمی آلی (۴ سوال)</li>
                            <li>سینتیک (۲ سوال)</li>
                        </ul>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3 style="color: var(--accent-blue); margin-bottom: 20px;">لیست تحلیل‌های دیگر</h3>
                    <div class="video-playlist">
                        <div class="playlist-item active">
                            <i class="fas fa-play-circle" style="margin-left: 15px; color: var(--accent-blue);"></i>
                            <div style="flex: 1;">
                                <div>تحلیل آزمون قلمچی - آذر ۱۴۰۲</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">مدت: ۴۵:۲۰ - مدرس: دکتر احمدی</div>
                            </div>
                        </div>
                        <div class="playlist-item">
                            <i class="fas fa-play-circle" style="margin-left: 15px; color: var(--accent-blue);"></i>
                            <div style="flex: 1;">
                                <div>تحلیل آزمون قلمچی - آبان ۱۴۰۲</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">مدت: ۵۰:۱۵ - مدرس: دکتر احمدی</div>
                            </div>
                        </div>
                        <div class="playlist-item">
                            <i class="fas fa-play-circle" style="margin-left: 15px; color: var(--accent-blue);"></i>
                            <div style="flex: 1;">
                                <div>تحلیل آزمون قلمچی - مهر ۱۴۰۲</div>
                                <div style="color: var(--text-muted); font-size: 0.9rem;">مدت: ۳۸:۴۰ - مدرس: دکتر احمدی</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- سایر صفحات سایت (بدون تغییر) -->
    <!-- صفحه ثبت نام/ورود -->
    <section id="auth" class="page">
        <div class="container">
            <h2 class="section-title">ورود به حساب کاربری</h2>
            
            <div class="auth-section">
                <div class="auth-tabs">
                    <div class="auth-tab active" onclick="showAuthForm('login')">ورود</div>
                    <div class="auth-tab" onclick="showAuthForm('register')">ثبت نام</div>
                </div>
                
                <!-- فرم ورود -->
                <div id="login-form" class="auth-form active">
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="login-email">ایمیل یا نام کاربری:</label>
                            <input type="text" id="login-email" class="form-control" placeholder="example@email.com" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="login-password">رمز عبور:</label>
                            <input type="password" id="login-password" class="form-control" placeholder="رمز عبور" required>
                        </div>
                        
                        <button type="submit" class="submit-btn">
                            <i class="fas fa-sign-in-alt"></i> ورود به حساب
                        </button>
                    </form>
                </div>
                
                <!-- فرم ثبت نام -->
                <div id="register-form" class="auth-form">
                    <form id="registerForm">
                        <div class="form-group">
                            <label for="register-name">نام و نام خانوادگی:</label>
                            <input type="text" id="register-name" class="form-control" placeholder="علی احمدی" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-email">ایمیل:</label>
                            <input type="email" id="register-email" class="form-control" placeholder="example@email.com" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-phone">شماره موبایل:</label>
                            <input type="tel" id="register-phone" class="form-control" placeholder="0912XXXXXXX" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-username">نام کاربری:</label>
                            <input type="text" id="register-username" class="form-control" placeholder="ali_ahmadi" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-password">رمز عبور:</label>
                            <input type="password" id="register-password" class="form-control" placeholder="حداقل ۸ کاراکتر" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="register-grade">پایه تحصیلی:</label>
                            <select id="register-grade" class="form-control" required>
                                <option value="">انتخاب کنید</option>
                                <option value="10">دهم</option>
                                <option value="11">یازدهم</option>
                                <option value="12">دوازدهم</option>
                                <option value="13">فارغ‌التحصیل</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="submit-btn">
                            <i class="fas fa-user-plus"></i> ایجاد حساب کاربری
                        </button>
                    </form>
                </div>
                
                <div id="auth-message" style="margin-top: 20px; text-align: center;"></div>
            </div>
        </div>
    </section>

    <!-- صفحه جدول تناوبی -->
    <section id="elements" class="page">
        <div class="container">
            <h2 class="section-title">جدول تناوبی عناصر (۱ تا ۱۱۸)</h2>
            <div class="full-periodic-table">
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 30px;">
                    روی هر عنصر کلیک کنید تا اطلاعات کامل آن نمایش داده شود
                </p>
                <div class="table-container" id="periodic-table-container">
                    <!-- جدول با جاوااسکریپت پر می‌شود -->
                </div>
                
                <div class="periodic-table-note">
                    <h4 style="color: var(--accent-yellow); margin-bottom: 10px;">📌 نکات مهم کنکوری جدول تناوبی:</h4>
                    <ul style="color: var(--text-primary); padding-right: 20px;">
                        <li>فلزات قلیایی (گروه ۱) با آب واکنش شدید می‌دهند</li>
                        <li>هالوژن‌ها (گروه ۱۷) بالاترین الکترونگاتیوی را دارند</li>
                        <li>گازهای نجیب (گروه ۱۸) آرایش الکترونی پایدار دارند</li>
                        <li>فعالیت فلزات از بالا به پایین در گروه‌ها افزایش می‌یابد</li>
                        <li>نافلزات در سمت راست و بالای جدول قرار دارند</li>
                    </ul>
                </div>
                
                <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 30px;">
                    <div style="display: flex; align-items: center;">
                        <div class="periodic-element alkali-metal" style="width: 20px; height: 20px; margin-left: 10px;"></div>
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">فلزات قلیایی</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="periodic-element alkaline-earth" style="width: 20px; height: 20px; margin-left: 10px;"></div>
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">فلزات قلیایی خاکی</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="periodic-element transition-metal" style="width: 20px; height: 20px; margin-left: 10px;"></div>
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">فلزات واسطه</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="periodic-element metalloid" style="width: 20px; height: 20px; margin-left: 10px;"></div>
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">شبه فلزات</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="periodic-element nonmetal" style="width: 20px; height: 20px; margin-left: 10px;"></div>
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">نافلزات</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="periodic-element halogen" style="width: 20px; height: 20px; margin-left: 10px;"></div>
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">هالوژن‌ها</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="periodic-element noble-gas" style="width: 20px; height: 20px; margin-left: 10px;"></div>
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">گازهای نجیب</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="periodic-element lanthanide" style="width: 20px; height: 20px; margin-left: 10px;"></div>
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">لانتانیدها</span>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <div class="periodic-element actinide" style="width: 20px; height: 20px; margin-left: 10px;"></div>
                        <span style="color: var(--text-secondary); font-size: 0.9rem;">آکتینیدها</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- صفحه جرم مولی -->
    <section id="molar-mass" class="page">
        <div class="container">
            <h2 class="section-title">محاسبه جرم مولی عناصر</h2>
            <div class="all-elements-calculator">
                <p style="text-align: center; color: var(--text-secondary); margin-bottom: 20px;">
                    روی هر عنصر کلیک کنید تا جرم مولی و اطلاعات آن نمایش داده شود
                </p>
                <div class="elements-grid" id="all-elements-grid">
                    <!-- عناصر با جاوااسکریپت پر می‌شوند -->
                </div>
            </div>
        </div>
    </section>

    <!-- صفحه واکنش‌های مهم -->
    <section id="reactions" class="page">
        <div class="container">
            <h2 class="section-title">واکنش‌های مهم شیمی کنکور</h2>
            <div class="chapter-filter" id="reaction-filters">
                <!-- فیلترها با جاوااسکریپت اضافه می‌شوند -->
            </div>
            <div class="important-reactions" id="reactions-container">
                <!-- واکنش‌ها با جاوااسکریپت پر می‌شوند -->
            </div>
        </div>
    </section>

    <!-- صفحه جزوات -->
    <section id="handouts" class="page">
        <div class="container">
            <h2 class="section-title">جزوات آموزشی شیمی کنکور</h2>
            <div class="handouts-container">
                <!-- جزوات با جاوااسکریپت پر می‌شوند -->
            </div>
        </div>
    </section>

    <!-- صفحه نمونه سوالات -->
    <section id="questions" class="page">
        <div class="container">
            <h2 class="section-title">نمونه سوالات کنکور</h2>
            <div class="questions-container">
                <!-- نمونه سوالات با جاوااسکریپت پر می‌شوند -->
            </div>
        </div>
    </section>

    <!-- صفحه آزمون آنلاین -->
    <section id="quiz" class="page">
        <div class="container">
            <h2 class="section-title">آزمون آنلاین شیمی</h2>
            
            <div class="quiz-container" id="quiz-container">
                <!-- محتوای آزمون آنلاین -->
            </div>
            
            <div class="result-box" id="result-box">
                <!-- نتایج آزمون -->
            </div>
        </div>
    </section>

    <!-- صفحه ویدیوهای آموزشی -->
    <section id="videos" class="page">
        <div class="container">
            <h2 class="section-title">ویدیوهای آموزشی آنلاین</h2>
            
            <!-- پخش‌کننده ویدیو -->
            <div class="video-player-container">
                <h3 style="color: var(--accent-blue); margin-bottom: 20px;" id="current-video-title">ویدیو آموزشی</h3>
                <div class="video-player">
                    <video id="main-video" controls poster="https://via.placeholder.com/800x450/112240/64ffda?text=Chemistry+Video">
                        <source id="video-source" src="" type="video/mp4">
                        مرورگر شما از پخش ویدیو پشتیبانی نمی‌کند.
                    </video>
                </div>
                
                <div class="video-controls">
                    <button class="btn" onclick="previousVideo()">
                        <i class="fas fa-backward"></i> قبلی
                    </button>
                    <button class="btn" onclick="nextVideo()">
                        بعدی <i class="fas fa-forward"></i>
                    </button>
                </div>
                
                <!-- پلی‌لیست ویدیوها -->
                <div class="video-playlist">
                    <h4 style="color: var(--accent-blue); margin-bottom: 15px;">لیست ویدیوها</h4>
                    <div id="video-playlist-items">
                        <!-- پلی‌لیست با جاوااسکریپت پر می‌شود -->
                    </div>
                </div>
            </div>
            
            <!-- بخش آپلود ویدیو (برای مدرس) -->
            <div id="upload-section" class="upload-section" style="display: none;">
                <h3 style="color: var(--accent-blue); margin-bottom: 20px;">آپلود ویدیو جدید</h3>
                
                <form id="upload-form">
                    <div class="form-group">
                        <label for="video-title">عنوان ویدیو:</label>
                        <input type="text" id="video-title" class="form-control" placeholder="مثال: ساختار اتم - جلسه اول" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="video-description">توضیحات:</label>
                        <textarea id="video-description" class="form-control" rows="3" placeholder="توضیحات کامل ویدیو..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="video-category">دسته‌بندی:</label>
                        <select id="video-category" class="form-control" required>
                            <option value="">انتخاب کنید</option>
                            <option value="structure">ساختار اتم</option>
                            <option value="periodic">جدول تناوبی</option>
                            <option value="bonding">پیوندهای شیمیایی</option>
                            <option value="stoichiometry">استوکیومتری</option>
                            <option value="thermo">ترمودینامیک</option>
                            <option value="kinetics">سینتیک</option>
                            <option value="equilibrium">تعادل شیمیایی</option>
                            <option value="acidbase">اسید و باز</option>
                            <option value="electro">الکتروشیمی</option>
                            <option value="organic">شیمی آلی</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="video-file">فایل ویدیو:</label>
                        <div class="upload-area" onclick="document.getElementById('video-file').click()">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: var(--accent-blue); margin-bottom: 15px;"></i>
                            <p style="color: var(--text-secondary);">برای آپلود کلیک کنید یا فایل را اینجا بکشید</p>
                            <p style="color: var(--text-muted); font-size: 0.9rem; margin-top: 10px;">
                                فرمت‌های مجاز: MP4, WebM, OGG
                            </p>
                            <input type="file" id="video-file" accept="video/*" style="display: none;" onchange="handleFileSelect(event)">
                        </div>
                        <div id="file-info" style="display: none; background-color: var(--light-blue); padding: 15px; border-radius: 8px; margin-top: 10px;">
                            <p style="color: var(--text-secondary); margin: 0;">
                                <i class="fas fa-file-video"></i> فایل انتخاب شده: <span id="file-name"></span>
                            </p>
                        </div>
                    </div>
                    
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-upload"></i> آپلود ویدیو
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- صفحه عکس کلاس‌ها -->
    <section id="gallery" class="page">
        <div class="container">
            <h2 class="section-title">عکس‌های کلاس‌های آموزشی</h2>
            <div class="gallery-container" id="gallery-container">
                <!-- عکس‌ها با جاوااسکریپت پر می‌شوند -->
            </div>
        </div>
    </section>

    <!-- صفحه رفع اشکال -->
    <section id="help" class="page">
        <div class="container">
            <h2 class="section-title">رفع اشکال و پرسش و پاسخ</h2>
            <div class="help-section">
                <div class="help-form">
                    <h3 style="color: var(--accent-blue); text-align: center; margin-bottom: 30px;">
                        سوالات خود را از من بپرسید
                    </h3>
                    <form id="question-form">
                        <div class="form-group">
                            <label for="name">نام و نام خانوادگی:</label>
                            <input type="text" id="name" class="form-control" placeholder="نام خود را وارد کنید" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="phone">شماره تماس:</label>
                            <input type="tel" id="phone" class="form-control" placeholder="۰۹۱۲XXXXXXX" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="subject">موضوع سوال:</label>
                            <select id="subject" class="form-control" required>
                                <option value="">موضوع را انتخاب کنید</option>
                                <option value="ساختار اتم">ساختار اتم</option>
                                <option value="جدول تناوبی">جدول تناوبی</option>
                                <option value="پیوندهای شیمیایی">پیوندهای شیمیایی</option>
                                <option value="استوکیومتری">استوکیومتری</option>
                                <option value="ترمودینامیک">ترمودینامیک</option>
                                <option value="سینتیک">سینتیک</option>
                                <option value="تعادل شیمیایی">تعادل شیمیایی</option>
                                <option value="اسید و باز">اسید و باز</option>
                                <option value="الکتروشیمی">الکتروشیمی</option>
                                <option value="شیمی آلی">شیمی آلی</option>
                                <option value="سایر">سایر</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="question">سوال خود را بنویسید:</label>
                            <textarea id="question" class="form-control" placeholder="سوال شیمی خود را به طور کامل شرح دهید..." required></textarea>
                        </div>
                        
                        <button type="submit" class="submit-btn">
                            <i class="fas fa-paper-plane"></i> ارسال سوال
                        </button>
                    </form>
                    
                    <div class="help-info">
                        <h4 style="color: var(--accent-blue); margin-bottom: 10px;">نکات مهم:</h4>
                        <ul style="color: var(--text-secondary); padding-right: 20px;">
                            <li>پاسخ سوالات شما حداکثر طی ۲۴ ساعت داده می‌شود</li>
                            <li>شماره تماس شما فقط برای ارتباط با شما استفاده می‌شود</li>
                            <li>سوالات خود را به طور کامل و واضح مطرح کنید</li>
                            <li>می‌توانید عکس مسئله یا تمرین را نیز ارسال کنید</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- فوتر -->
    <footer>
        <div class="container">
            <div class="social-links">
                <a href="https://www.instagram.com" class="social-link" target="_blank">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://telegram.org" class="social-link" target="_blank">
                    <i class="fab fa-telegram"></i>
                </a>
                <a href="tel:+989121234567" class="social-link">
                    <i class="fas fa-phone"></i>
                </a>
                <a href="mailto:chemistry.teacher@example.com" class="social-link">
                    <i class="fas fa-envelope"></i>
                </a>
                <a href="https://wa.me/989121234567" class="social-link" target="_blank">
                    <i class="fab fa-whatsapp"></i>
                </a>
            </div>
            <div class="copyright">
                <p>© ۱۴۰۳ تمامی حقوق این سایت محفوظ است. مدرس تخصصی شیمی کنکور - دکتر علی احمدی</p>
                <p>ارائه بهترین خدمات آموزشی برای موفقیت در کنکور شیمی</p>
            </div>
        </div>
    </footer>

    <!-- مدال اطلاعات عنصر -->
    <div class="element-modal" id="element-modal">
        <div class="modal-content">
            <button class="close-modal" id="close-modal">&times;</button>
            <div id="modal-content">
                <!-- محتوای مدال با جاوااسکریپت پر می‌شود -->
            </div>
        </div>
    </div>

    <!-- دکمه مدیریت سوالات (برای مدرس) -->
    <button class="admin-panel-btn" id="admin-panel-btn">
        <i class="fas fa-cog"></i> مدیریت سوالات
    </button>

    <!-- JavaScript -->
    <script>
        // =================== سیستم ثبت نام و ورود ===================
        const users = JSON.parse(localStorage.getItem('chemistryUsers')) || [];
        const currentUser = JSON.parse(localStorage.getItem('currentUser')) || null;
        const videos = JSON.parse(localStorage.getItem('chemistryVideos')) || getDefaultVideos();
        let studentQuestions = JSON.parse(localStorage.getItem('chemistryQuestions')) || [];

        // منوی موبایل
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navLinks = document.querySelector('.nav-links');
        
        mobileMenuBtn.addEventListener('click', () => {
            navLinks.classList.toggle('active');
            mobileMenuBtn.innerHTML = navLinks.classList.contains('active') 
                ? '<i class="fas fa-times"></i>' 
                : '<i class="fas fa-bars"></i>';
        });
        
        // سیستم نمایش صفحات
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
            window.scrollTo(0, 0);
            
            // بارگذاری محتوای صفحه
            if (pageId === 'elements') loadPeriodicTable();
            if (pageId === 'molar-mass') loadMolarMassElements();
            if (pageId === 'reactions') loadReactions();
            if (pageId === 'handouts') loadHandouts();
            if (pageId === 'questions') loadQuestions();
            if (pageId === 'quiz') loadQuiz();
            if (pageId === 'videos') loadVideos();
            if (pageId === 'gallery') loadGallery();
            if (pageId === 'help') loadHelpSection();
            if (pageId === 'auth') checkAuthStatus();
            if (pageId === 'dashboard') updateDashboard();
            if (pageId === 'video-analysis') loadVideoAnalysis();
            
            return false;
        }

        // =================== پنل کاربری دانش‌آموز ===================
        function updateDashboard() {
            if (currentUser) {
                document.getElementById('dashboard-name').textContent = currentUser.name;
                document.getElementById('dashboard-grade').textContent = 
                    `پایه ${getGradeName(currentUser.grade)} | دانش‌آموز`;
                document.getElementById('dashboard-date').innerHTML = 
                    `<i class="fas fa-calendar"></i> آخرین بازدید: ${currentUser.lastLogin || 'امروز'}`;
                
                // آمارها
                const watchedVideos = currentUser.progress?.watchedVideos?.length || 0;
                const completedQuizzes = currentUser.progress?.completedQuizzes?.length || 0;
                const totalScore = currentUser.progress?.score || 0;
                const averagePercentage = calculateAverageScore();
                
                document.getElementById('stat-videos').textContent = watchedVideos;
                document.getElementById('stat-quizzes').textContent = completedQuizzes;
                document.getElementById('stat-score').textContent = totalScore;
                document.getElementById('stat-percentage').textContent = `${averagePercentage}%`;
                
                // نمایش دکمه خروج
                document.getElementById('dashboard-login-btn').style.display = 'none';
                document.getElementById('dashboard-logout-btn').style.display = 'inline-block';
            } else {
                // ریست کردن اطلاعات برای کاربر مهمان
                document.getElementById('dashboard-name').textContent = 'دانش‌آموز عزیز';
                document.getElementById('dashboard-grade').textContent = 'لطفاً وارد حساب کاربری خود شوید';
                document.getElementById('dashboard-date').innerHTML = '<i class="fas fa-calendar"></i> آخرین بازدید: -';
                
                document.getElementById('stat-videos').textContent = '0';
                document.getElementById('stat-quizzes').textContent = '0';
                document.getElementById('stat-score').textContent = '0';
                document.getElementById('stat-percentage').textContent = '0%';
                
                // نمایش دکمه ورود
                document.getElementById('dashboard-login-btn').style.display = 'inline-block';
                document.getElementById('dashboard-logout-btn').style.display = 'none';
            }
        }

        // =================== سیستم مدیریت سوالات ===================
        function initializeQuestionManagement() {
            // تنظیم دکمه مدیریت
            const adminBtn = document.getElementById('admin-panel-btn');
            adminBtn.addEventListener('click', () => {
                const password = prompt('برای دسترسی به پنل مدیریت، رمز عبور را وارد کنید:');
                if (password === 'chem123') {
                    showQuestionsPanel();
                } else {
                    alert('رمز عبور اشتباه است!');
                }
            });
            
            // بارگذاری سوالات از localStorage
            studentQuestions = JSON.parse(localStorage.getItem('chemistryQuestions')) || [];
        }

        // نمایش پنل مدیریت سوالات
        function showQuestionsPanel() {
            studentQuestions = JSON.parse(localStorage.getItem('chemistryQuestions')) || [];
            
            let questionsHTML = `
                <div style="background: var(--deep-blue); padding: 30px; border-radius: 15px; max-height: 80vh; overflow-y: auto;">
                    <h2 style="color: var(--accent-blue); text-align: center; margin-bottom: 25px;">
                        <i class="fas fa-question-circle"></i> مدیریت سوالات دانش‌آموزان
                    </h2>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 20px;">
                        <div>
                            <span style="color: var(--text-secondary);">
                                تعداد کل سوالات: <strong>${studentQuestions.length}</strong>
                            </span>
                        </div>
                        <div>
                            <button onclick="exportQuestions()" class="btn quick-action-btn" style="background: var(--accent-green);">
                                <i class="fas fa-file-excel"></i> خروجی Excel
                            </button>
                            <button onclick="sendBulkSMS()" class="btn quick-action-btn" style="background: #2196F3;">
                                <i class="fas fa-sms"></i> ارسال پیامک گروهی
                            </button>
                        </div>
                    </div>
            `;
            
            if (studentQuestions.length === 0) {
                questionsHTML += `
                    <div style="text-align: center; padding: 50px; color: var(--text-muted);">
                        <i class="fas fa-inbox" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <h3>هنوز سوالی ثبت نشده است</h3>
                        <p>دانش‌آموزان شما می‌توانند از بخش "رفع اشکال" سوالات خود را ارسال کنند.</p>
                    </div>
                `;
            } else {
                // گروه‌بندی سوالات بر اساس وضعیت
                const newQuestions = studentQuestions.filter(q => q.status === 'جدید');
                const answeredQuestions = studentQuestions.filter(q => q.status === 'پاسخ داده');
                const pendingQuestions = studentQuestions.filter(q => q.status === 'در حال بررسی');
                
                // آمار
                questionsHTML += `
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px;">
                        <div style="background: var(--light-blue); padding: 15px; border-radius: 10px; text-align: center; border-right: 4px solid var(--accent-orange);">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--accent-orange);">${newQuestions.length}</div>
                            <div style="color: var(--text-secondary);">سوال جدید</div>
                        </div>
                        <div style="background: var(--light-blue); padding: 15px; border-radius: 10px; text-align: center; border-right: 4px solid var(--accent-yellow);">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--accent-yellow);">${pendingQuestions.length}</div>
                            <div style="color: var(--text-secondary);">در حال بررسی</div>
                        </div>
                        <div style="background: var(--light-blue); padding: 15px; border-radius: 10px; text-align: center; border-right: 4px solid var(--accent-green);">
                            <div style="font-size: 2rem; font-weight: bold; color: var(--accent-green);">${answeredQuestions.length}</div>
                            <div style="color: var(--text-secondary);">پاسخ داده شده</div>
                        </div>
                    </div>
                `;
                
                // جدول سوالات
                questionsHTML += `
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: var(--light-blue);">
                                    <th style="padding: 12px; text-align: right;">کد</th>
                                    <th style="padding: 12px; text-align: right;">دانش‌آموز</th>
                                    <th style="padding: 12px; text-align: right;">موضوع</th>
                                    <th style="padding: 12px; text-align: right;">تاریخ</th>
                                    <th style="padding: 12px; text-align: right;">وضعیت</th>
                                    <th style="padding: 12px; text-align: right;">عملیات</th>
                                </tr>
                            </thead>
                            <tbody>
                `;
                
                // نمایش سوالات به ترتیب جدیدترین
                [...studentQuestions].reverse().forEach((question, index) => {
                    const statusColor = question.status === 'پاسخ داده' ? 'var(--accent-green)' : 
                                      question.status === 'در حال بررسی' ? 'var(--accent-yellow)' : 'var(--accent-orange)';
                    
                    questionsHTML += `
                        <tr style="background: ${index % 2 === 0 ? 'var(--deep-blue)' : 'rgba(255,255,255,0.05)'};">
                            <td style="padding: 10px; border-bottom: 1px solid var(--light-blue);">${question.id}</td>
                            <td style="padding: 10px; border-bottom: 1px solid var(--light-blue);">
                                <strong>${question.name}</strong><br>
                                <small style="color: var(--text-muted);">${question.phone}</small>
                            </td>
                            <td style="padding: 10px; border-bottom: 1px solid var(--light-blue);">${question.subject}</td>
                            <td style="padding: 10px; border-bottom: 1px solid var(--light-blue);">${question.date}</td>
                            <td style="padding: 10px; border-bottom: 1px solid var(--light-blue);">
                                <span style="display: inline-block; padding: 4px 12px; border-radius: 15px; background: ${statusColor}; color: white; font-size: 0.8rem;">
                                    ${question.status}
                                </span>
                            </td>
                            <td style="padding: 10px; border-bottom: 1px solid var(--light-blue);">
                                <div style="display: flex; gap: 5px;">
                                    <button onclick="viewQuestionDetail(${question.id})" class="quick-action-btn" style="background: var(--accent-blue);">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button onclick="answerViaWhatsApp(${question.id})" class="quick-action-btn whatsapp-btn">
                                        <i class="fab fa-whatsapp"></i>
                                    </button>
                                    <button onclick="sendSMS(${question.id})" class="quick-action-btn sms-btn">
                                        <i class="fas fa-sms"></i>
                                    </button>
                                    <button onclick="deleteQuestion(${question.id})" class="quick-action-btn" style="background: var(--accent-red);">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                    `;
                });
                
                questionsHTML += `
                            </tbody>
                        </table>
                    </div>
                `;
            }
            
            questionsHTML += `
                    <div style="margin-top: 25px; text-align: center;">
                        <button onclick="closeModal()" class="btn" style="background: var(--accent-red);">
                            <i class="fas fa-times"></i> بستن پنل
                        </button>
                    </div>
                </div>
            `;
            
            // نمایش در مدال
            document.getElementById('modal-content').innerHTML = questionsHTML;
            document.getElementById('element-modal').style.display = 'flex';
        }

        // مشاهده جزئیات سوال و پاسخگویی
        function viewQuestionDetail(questionId) {
            const question = studentQuestions.find(q => q.id === questionId);
            if (!question) return;
            
            let detailHTML = `
                <div style="background: var(--deep-blue); padding: 25px; border-radius: 10px;">
                    <h3 style="color: var(--accent-blue); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-question-circle"></i> جزئیات سوال
                    </h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 25px;">
                        <div style="background: var(--light-blue); padding: 15px; border-radius: 8px;">
                            <div style="color: var(--text-muted); font-size: 0.9rem;">کد سوال</div>
                            <div style="font-weight: bold; color: var(--accent-blue);">${question.id}</div>
                        </div>
                        <div style="background: var(--light-blue); padding: 15px; border-radius: 8px;">
                            <div style="color: var(--text-muted); font-size: 0.9rem;">وضعیت</div>
                            <div style="font-weight: bold; color: ${question.status === 'پاسخ داده' ? 'var(--accent-green)' : 'var(--accent-orange)'};">${question.status}</div>
                        </div>
                        <div style="background: var(--light-blue); padding: 15px; border-radius: 8px;">
                            <div style="color: var(--text-muted); font-size: 0.9rem;">نام دانش‌آموز</div>
                            <div style="font-weight: bold;">${question.name}</div>
                        </div>
                        <div style="background: var(--light-blue); padding: 15px; border-radius: 8px;">
                            <div style="color: var(--text-muted); font-size: 0.9rem;">شماره تماس</div>
                            <div style="font-weight: bold;">${question.phone}</div>
                        </div>
                    </div>
                    
                    <div style="background: var(--light-blue); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <div style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 10px;">موضوع</div>
                        <div style="font-weight: bold; color: var(--accent-blue);">${question.subject}</div>
                    </div>
                    
                    <div style="background: var(--light-blue); padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <div style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 10px;">متن سوال</div>
                        <div style="white-space: pre-wrap; line-height: 1.6;">${question.question}</div>
                    </div>
            `;
            
            if (question.answer) {
                detailHTML += `
                    <div style="background: rgba(100, 255, 218, 0.1); padding: 20px; border-radius: 8px; margin-bottom: 20px; border-right: 3px solid var(--accent-blue);">
                        <div style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 10px;">پاسخ شما</div>
                        <div style="white-space: pre-wrap; line-height: 1.6;">${question.answer}</div>
                        <div style="color: var(--text-muted); font-size: 0.8rem; margin-top: 10px; text-align: left;">
                            <i class="fas fa-calendar"></i> ${question.answerDate || ''}
                        </div>
                    </div>
                `;
            }
            
            // فرم پاسخگویی
            detailHTML += `
                    <div style="margin-top: 25px;">
                        <h4 style="color: var(--accent-blue); margin-bottom: 15px;">📝 ثبت پاسخ</h4>
                        <textarea id="answerInput-${question.id}" 
                                  placeholder="پاسخ خود را اینجا بنویسید..." 
                                  style="width: 100%; height: 150px; padding: 15px; background: var(--light-blue); color: var(--text-primary); border: none; border-radius: 8px; margin-bottom: 15px;"></textarea>
                        
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button onclick="saveAnswer(${question.id})" class="btn" style="background: var(--accent-green); flex: 1;">
                                <i class="fas fa-save"></i> ذخیره پاسخ
                            </button>
                            <button onclick="answerViaWhatsApp(${question.id}, true)" class="btn whatsapp-btn" style="flex: 1;">
                                <i class="fab fa-whatsapp"></i> ارسال از طریق واتساپ
                            </button>
                            <button onclick="sendSMS(${question.id}, true)" class="btn sms-btn" style="flex: 1;">
                                <i class="fas fa-sms"></i> ارسال پیامک
                            </button>
                        </div>
                        
                        <div style="margin-top: 15px;">
                            <label style="color: var(--text-secondary); display: block; margin-bottom: 10px;">
                                <input type="checkbox" id="markAsAnswered-${question.id}" ${question.status === 'پاسخ داده' ? 'checked' : ''} onchange="toggleQuestionStatus(${question.id})">
                                علامت گذاری به عنوان پاسخ داده شده
                            </label>
                        </div>
                    </div>
                    
                    <div style="margin-top: 25px; text-align: center;">
                        <button onclick="showQuestionsPanel()" class="btn" style="background: var(--accent-purple);">
                            <i class="fas fa-arrow-right"></i> بازگشت به لیست
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('modal-content').innerHTML = detailHTML;
        }

        // =================== سیستم تحلیل ویدیویی آزمون‌های قلمچی ===================
        function loadVideoAnalysis() {
            // پخش خودکار ویدیوی تحلیل
            const analysisVideo = document.getElementById('analysis-video');
            if (analysisVideo) {
                analysisVideo.load();
            }
            
            // تنظیم کلیک بر روی آیتم‌های پلی‌لیست
            const playlistItems = document.querySelectorAll('#video-analysis .playlist-item');
            playlistItems.forEach((item, index) => {
                item.addEventListener('click', () => {
                    // حذف کلاس active از همه
                    playlistItems.forEach(item => item.classList.remove('active'));
                    // اضافه کردن کلاس active به آیتم انتخاب شده
                    item.classList.add('active');
                    
                    // تغییر عنوان ویدیو
                    const title = item.querySelector('div:first-child').textContent;
                    document.getElementById('analysis-video-title').textContent = title;
                    
                    // در اینجا می‌توانید منبع ویدیو را تغییر دهید
                    // analysisVideo.src = 'آدرس ویدیوی جدید';
                });
            });
        }

        // =================== سیستم ثبت نام و ورود ===================
        function showAuthForm(formType) {
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.auth-form').forEach(form => {
                form.classList.remove('active');
            });
            
            if (formType === 'login') {
                document.querySelector('.auth-tab:nth-child(1)').classList.add('active');
                document.getElementById('login-form').classList.add('active');
            } else {
                document.querySelector('.auth-tab:nth-child(2)').classList.add('active');
                document.getElementById('register-form').classList.add('active');
            }
        }

        // ثبت نام کاربر جدید
        document.getElementById('registerForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const userData = {
                id: Date.now(),
                name: document.getElementById('register-name').value,
                email: document.getElementById('register-email').value,
                phone: document.getElementById('register-phone').value,
                username: document.getElementById('register-username').value,
                password: document.getElementById('register-password').value,
                grade: document.getElementById('register-grade').value,
                role: 'student',
                joinDate: new Date().toLocaleDateString('fa-IR'),
                lastLogin: new Date().toLocaleDateString('fa-IR'),
                progress: {
                    watchedVideos: [],
                    completedQuizzes: [],
                    score: 0,
                    correctAnswers: 0,
                    totalQuestions: 0
                }
            };
            
            // بررسی تکراری نبودن ایمیل و نام کاربری
            if (users.some(u => u.email === userData.email)) {
                showAuthMessage('این ایمیل قبلاً ثبت شده است', 'error');
                return;
            }
            
            if (users.some(u => u.username === userData.username)) {
                showAuthMessage('این نام کاربری قبلاً انتخاب شده است', 'error');
                return;
            }
            
            // بررسی ایمیل معتبر
            if (!validateEmail(userData.email)) {
                showAuthMessage('لطفا یک ایمیل معتبر وارد کنید', 'error');
                return;
            }
            
            // بررسی طول رمز عبور
            if (userData.password.length < 8) {
                showAuthMessage('رمز عبور باید حداقل ۸ کاراکتر باشد', 'error');
                return;
            }
            
            users.push(userData);
            localStorage.setItem('chemistryUsers', JSON.stringify(users));
            localStorage.setItem('currentUser', JSON.stringify(userData));
            
            showAuthMessage('✅ حساب کاربری با موفقیت ایجاد شد!', 'success');
            document.getElementById('registerForm').reset();
            
            setTimeout(() => {
                showPage('dashboard');
                updateNavForUser();
                updateDashboard();
                showWelcomeMessage(userData.name);
            }, 1500);
        });

        // ورود کاربر
        document.getElementById('loginForm')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            const user = users.find(u => 
                (u.email === email || u.username === email) && u.password === password
            );
            
            if (user) {
                user.lastLogin = new Date().toLocaleDateString('fa-IR');
                localStorage.setItem('currentUser', JSON.stringify(user));
                localStorage.setItem('chemistryUsers', JSON.stringify(users));
                
                showAuthMessage('✅ ورود موفقیت‌آمیز بود!', 'success');
                document.getElementById('loginForm').reset();
                
                setTimeout(() => {
                    showPage('dashboard');
                    updateNavForUser();
                    updateDashboard();
                    showWelcomeMessage(user.name);
                }, 1000);
            } else {
                showAuthMessage('❌ ایمیل یا رمز عبور اشتباه است', 'error');
            }
        });

        function showAuthMessage(message, type) {
            const msgDiv = document.getElementById('auth-message');
            msgDiv.innerHTML = `
                <div style="padding: 15px; border-radius: 8px; background-color: ${type === 'success' ? 'rgba(81, 207, 102, 0.2)' : 'rgba(255, 107, 107, 0.2)'}; color: ${type === 'success' ? 'var(--accent-green)' : 'var(--accent-red)'}; border: 1px solid ${type === 'success' ? 'var(--accent-green)' : 'var(--accent-red)'};">
                    ${message}
                </div>
            `;
            
            setTimeout(() => {
                msgDiv.innerHTML = '';
            }, 3000);
        }

        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function checkAuthStatus() {
            if (currentUser) {
                showAuthMessage(`شما در حال حاضر با نام ${currentUser.name} وارد شده‌اید`, 'success');
            }
        }

        function updateNavForUser() {
            const nav = document.querySelector('.nav-links');
            
            if (currentUser) {
                nav.innerHTML = `
                    <li><a href="#" onclick="showPage('home')">خانه</a></li>
                    <li><a href="#" onclick="showPage('dashboard')">👤 پنل کاربری</a></li>
                    <li><a href="#" onclick="showPage('elements')">جدول تناوبی</a></li>
                    <li><a href="#" onclick="showPage('molar-mass')">جرم مولی</a></li>
                    <li><a href="#" onclick="showPage('reactions')">واکنش‌ها</a></li>
                    <li><a href="#" onclick="showPage('handouts')">جزوات</a></li>
                    <li><a href="#" onclick="showPage('questions')">نمونه سوالات</a></li>
                    <li><a href="#" onclick="showPage('quiz')">آزمون آنلاین</a></li>
                    <li><a href="#" onclick="showPage('videos')">ویدیوها</a></li>
                    <li><a href="#" onclick="showPage('gallery')">عکس کلاس‌ها</a></li>
                    <li><a href="#" onclick="showPage('help')">رفع اشکال</a></li>
                    <li><a href="#" onclick="showPage('video-analysis')">تحلیل آزمون</a></li>
                    ${currentUser.role === 'teacher' ? '<li><a href="#" onclick="showUploadSection()"><i class="fas fa-upload"></i> آپلود</a></li>' : ''}
                    <li><a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> خروج</a></li>
                `;
            } else {
                nav.innerHTML = `
                    <li><a href="#" onclick="showPage('home')">خانه</a></li>
                    <li><a href="#" onclick="showPage('auth')">ثبت نام / ورود</a></li>
                    <li><a href="#" onclick="showPage('dashboard')">پنل کاربری</a></li>
                    <li><a href="#" onclick="showPage('elements')">جدول تناوبی</a></li>
                    <li><a href="#" onclick="showPage('molar-mass')">جرم مولی</a></li>
                    <li><a href="#" onclick="showPage('reactions')">واکنش‌ها</a></li>
                    <li><a href="#" onclick="showPage('handouts')">جزوات</a></li>
                    <li><a href="#" onclick="showPage('questions')">نمونه سوالات</a></li>
                    <li><a href="#" onclick="showPage('quiz')">آزمون آنلاین</a></li>
                    <li><a href="#" onclick="showPage('videos')">ویدیوها</a></li>
                    <li><a href="#" onclick="showPage('gallery')">عکس کلاس‌ها</a></li>
                    <li><a href="#" onclick="showPage('help')">رفع اشکال</a></li>
                    <li><a href="#" onclick="showPage('video-analysis')">تحلیل آزمون</a></li>
                `;
            }
        }

        function calculateAverageScore() {
            if (!currentUser || !currentUser.progress || currentUser.progress.totalQuestions === 0) {
                return 0;
            }
            return Math.round((currentUser.progress.correctAnswers / currentUser.progress.totalQuestions) * 100);
        }

        function getGradeName(grade) {
            const grades = {
                '10': 'دهم',
                '11': 'یازدهم',
                '12': 'دوازدهم',
                '13': 'فارغ‌التحصیل'
            };
            return grades[grade] || 'نامشخص';
        }

        function showWelcomeMessage(name) {
            const welcomeMsg = document.createElement('div');
            welcomeMsg.style.cssText = `
                position: fixed;
                top: 100px;
                right: 20px;
                background: linear-gradient(135deg, var(--accent-green) 0%, var(--accent-blue) 100%);
                color: var(--midnight-blue);
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 1001;
                box-shadow: 0 5px 15px rgba(0,0,0,0.3);
                animation: slideIn 0.5s ease;
            `;
            
            welcomeMsg.innerHTML = `
                <strong>👋 خوش آمدید ${name}!</strong>
                <p style="margin: 5px 0 0 0; font-size: 0.9rem;">به سیستم آموزشی شیمی خوش آمدید</p>
            `;
            
            document.body.appendChild(welcomeMsg);
            
            setTimeout(() => {
                welcomeMsg.style.animation = 'slideOut 0.5s ease';
                setTimeout(() => welcomeMsg.remove(), 500);
            }, 3000);
        }

        function logout() {
            localStorage.removeItem('currentUser');
            alert('با موفقیت خارج شدید.');
            updateNavForUser();
            showPage('home');
            updateDashboard();
        }

        // =================== سیستم واکنش‌های شیمیایی ===================
        const chemicalReactions = {
            'اکسایش-کاهش': [
                {
                    equation: "۲Na + Cl₂ → ۲NaCl",
                    name: "تشکیل نمک طعام",
                    type: "اکسایش-کاهش",
                    details: "اکسایش سدیم (۰ به +۱) و کاهش کلر (۰ به -۱)",
                    importance: "کنکور ۹۸، ۱۴۰۰، ۱۴۰۲",
                    example: "واکنش فلز سدیم با گاز کلر"
                },
                {
                    equation: "Zn + Cu²⁺ → Zn²⁺ + Cu",
                    name: "جانشینی فلزی",
                    type: "اکسایش-کاهش",
                    details: "اکسایش روی (۰ به +۲) و کاهش مس (+۲ به ۰)",
                    importance: "کنکور ۹۹، ۱۴۰۱، ۱۴۰۲",
                    example: "پیل گالوانی روی-مس"
                },
                {
                    equation: "۲KMnO₄ + ۵H₂O₂ + ۳H₂SO₄ → K₂SO₄ + ۲MnSO₄ + ۸H₂O + ۵O₂",
                    name: "اکسایش پراکسید هیدروژن",
                    type: "اکسایش-کاهش",
                    details: "اکسایش پراکسید و کاهش پرمنگنات در محیط اسیدی",
                    importance: "کنکور ۱۴۰۰، ۱۴۰۱",
                    example: "واکنش تیتراسیون"
                }
            ],
            'اسید-باز': [
                {
                    equation: "HCl + NaOH → NaCl + H₂O",
                    name: "خنثی‌سازی",
                    type: "اسید-باز",
                    details: "واکنش اسید قوی با باز قوی - تولید نمک و آب",
                    importance: "کنکور ۹۷، ۹۹، ۱۴۰۰، ۱۴۰۲",
                    example: "تیتراسیون اسید و باز"
                },
                {
                    equation: "CH₃COOH + NH₃ ⇌ CH₃COONH₄",
                    name: "تشکیل نمک آمونیوم",
                    type: "اسید-باز",
                    details: "واکنش اسید ضعیف با باز ضعیف - تعادلی",
                    importance: "کنکور ۱۴۰۰، ۱۴۰۱",
                    example: "اسید استیک با آمونیاک"
                },
                {
                    equation: "H₂SO₄ + ۲NH₃ → (NH₄)₂SO₄",
                    name: "تشکیل سولفات آمونیوم",
                    type: "اسید-باز",
                    details: "واکنش اسید قوی با باز ضعیف",
                    importance: "کنکور ۹۹، ۱۴۰۰",
                    example: "کود شیمیایی"
                }
            ],
            'جانشینی': [
                {
                    equation: "Cu + ۲AgNO₃ → Cu(NO₃)₂ + ۲Ag",
                    name: "جانشینی مس با نقره",
                    type: "جانشینی",
                    details: "مس فعال‌تر جایگزین نقره می‌شود",
                    importance: "کنکور ۹۸، ۱۴۰۰، ۱۴۰۲",
                    example: "واکنش رشته مسی با نیترات نقره"
                },
                {
                    equation: "Fe + CuSO₄ → FeSO₄ + Cu",
                    name: "جانشینی آهن با مس",
                    type: "جانشینی",
                    details: "آهن فعال‌تر جایگزین مس می‌شود",
                    importance: "کنکور ۹۷، ۹۹، ۱۴۰۱",
                    example: "ساخت پیل گالوانی"
                },
                {
                    equation: "Zn + H₂SO₄ → ZnSO₄ + H₂",
                    name: "جانشینی هیدروژن",
                    type: "جانشینی",
                    details: "فلز فعال با اسید - تولید گاز هیدروژن",
                    importance: "کنکور ۹۸، ۱۴۰۰، ۱۴۰۲",
                    example: "تولید هیدروژن در آزمایشگاه"
                }
            ],
            'تجزیه': [
                {
                    equation: "۲KClO₃ → ۲KCl + ۳O₂",
                    name: "تجزیه کلرات پتاسیم",
                    type: "تجزیه",
                    details: "تولید اکسیژن در حضور کاتالیزگر MnO₂",
                    importance: "کنکور ۹۹، ۱۴۰۰، ۱۴۰۱",
                    example: "تهیه اکسیژن در آزمایشگاه"
                },
                {
                    equation: "CaCO₃ → CaO + CO₂",
                    name: "تجزیه کربنات کلسیم",
                    type: "تجزیه",
                    details: "تولید آهک زنده - گرماگیر",
                    importance: "کنکور ۹۸، ۱۴۰۰، ۱۴۰۲",
                    example: "پخت آهک"
                },
                {
                    equation: "۲H₂O₂ → ۲H₂O + O₂",
                    name: "تجزیه پراکسید هیدروژن",
                    type: "تجزیه",
                    details: "تجزیه کاتالیزوری با MnO₂",
                    importance: "کنکور ۱۴۰۰، ۱۴۰۱",
                    example: "تولید اکسیژن"
                }
            ],
            'ترکیب': [
                {
                    equation: "۲Mg + O₂ → ۲MgO",
                    name: "تشکیل اکسید منیزیم",
                    type: "ترکیب",
                    details: "واکنش شدید فلز منیزیم با اکسیژن",
                    importance: "کنکور ۹۷، ۹۹، ۱۴۰۰",
                    example: "سوختن منیزیم"
                },
                {
                    equation: "N₂ + ۳H₂ ⇌ ۲NH₃",
                    name: "تشکیل آمونیاک",
                    type: "ترکیب",
                    details: "فرآیند هابر-بوش - تعادلی",
                    importance: "کنکور ۹۸، ۱۴۰۰، ۱۴۰۲",
                    example: "تولید صنعتی آمونیاک"
                },
                {
                    equation: "SO₃ + H₂O → H₂SO₄",
                    name: "تشکیل اسید سولفوریک",
                    type: "ترکیب",
                    details: "تولید اسید سولفوریک غلیظ",
                    importance: "کنکور ۹۹، ۱۴۰۱",
                    example: "فرآیند تماسی"
                }
            ]
        };

        function loadReactions() {
            const container = document.getElementById('reactions-container');
            const filtersContainer = document.getElementById('reaction-filters');
            
            // ایجاد فیلترها
            filtersContainer.innerHTML = `
                <button class="chapter-btn active" onclick="filterReactions('همه')">همه واکنش‌ها</button>
                ${Object.keys(chemicalReactions).map(type => `
                    <button class="chapter-btn" onclick="filterReactions('${type}')">${type}</button>
                `).join('')}
            `;
            
            // بارگذاری همه واکنش‌ها
            filterReactions('همه');
        }

        function filterReactions(type) {
            const container = document.getElementById('reactions-container');
            const buttons = document.querySelectorAll('.chapter-btn');
            
            // به‌روزرسانی کلاس active
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            container.innerHTML = '';
            
            if (type === 'همه') {
                // نمایش همه واکنش‌ها
                Object.entries(chemicalReactions).forEach(([category, reactions]) => {
                    reactions.forEach(reaction => {
                        addReactionCard(reaction, category);
                    });
                });
            } else {
                // نمایش واکنش‌های یک دسته خاص
                chemicalReactions[type]?.forEach(reaction => {
                    addReactionCard(reaction, type);
                });
            }
        }

        function addReactionCard(reaction, category) {
            const container = document.getElementById('reactions-container');
            
            const reactionCard = document.createElement('div');
            reactionCard.className = 'reaction-card';
            
            // تعیین رنگ دسته‌بندی
            let categoryColor = 'var(--accent-green)';
            let categoryClass = 'oxidation';
            
            switch(category) {
                case 'اکسایش-کاهش': 
                    categoryColor = '#FF5252'; 
                    categoryClass = 'oxidation';
                    break;
                case 'اسید-باز': 
                    categoryColor = '#4CAF50'; 
                    categoryClass = 'acid-base';
                    break;
                case 'جانشینی': 
                    categoryColor = '#FF9800'; 
                    categoryClass = 'substitution';
                    break;
                case 'تجزیه': 
                    categoryColor = '#9C27B0'; 
                    categoryClass = 'decomposition';
                    break;
                case 'ترکیب': 
                    categoryColor = '#2196F3'; 
                    categoryClass = 'combination';
                    break;
            }
            
            reactionCard.innerHTML = `
                <div class="reaction-header">
                    <h3 style="color: var(--accent-blue);">${reaction.name}</h3>
                    <span class="reaction-category ${categoryClass}" style="background: ${categoryColor}">
                        ${reaction.type}
                    </span>
                </div>
                <div class="reaction-equation">${reaction.equation}</div>
                <p style="color: var(--text-secondary); margin-bottom: 15px;">${reaction.details}</p>
                <div style="background: rgba(255,255,255,0.05); padding: 12px; border-radius: 8px; margin-bottom: 15px;">
                    <div style="color: var(--accent-yellow); font-size: 0.9rem;">
                        <i class="fas fa-lightbulb"></i> مثال: ${reaction.example}
                    </div>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="color: var(--accent-green); font-size: 0.9rem;">
                        <i class="fas fa-graduation-cap"></i> ${reaction.importance}
                    </span>
                    <span style="color: var(--text-muted); font-size: 0.8rem;">${category}</span>
                </div>
            `;
            
            container.appendChild(reactionCard);
        }

        function loadReactionsPage() {
            showPage('reactions');
        }

        // =================== سیستم ویدیو آنلاین ===================
        function getDefaultVideos() {
            return [
                {
                    id: 1,
                    title: 'ساختار اتم - جلسه اول',
                    description: 'آموزش کامل ساختار اتم، ذرات زیراتمی و مدل‌های اتمی',
                    category: 'structure',
                    duration: '45:20',
                    views: 1250,
                    uploadDate: '1402/08/15',
                    thumbnail: 'https://via.placeholder.com/300x200/112240/64ffda?text=Atomic+Structure',
                    url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
                    teacher: 'دکتر علی احمدی',
                    likes: 89
                },
                {
                    id: 2,
                    title: 'جدول تناوبی پیشرفته',
                    description: 'تدریس کامل جدول تناوبی و نکات کنکوری آن',
                    category: 'periodic',
                    duration: '60:15',
                    views: 2100,
                    uploadDate: '1402/08/10',
                    thumbnail: 'https://via.placeholder.com/300x200/112240/64ffda?text=Periodic+Table',
                    url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4',
                    teacher: 'دکتر علی احمدی',
                    likes: 145
                },
                {
                    id: 3,
                    title: 'الکتروشیمی کنکور',
                    description: 'پیل‌های گالوانی و الکترولیتی به زبان ساده',
                    category: 'electro',
                    duration: '50:30',
                    views: 2300,
                    uploadDate: '1402/08/05',
                    thumbnail: 'https://via.placeholder.com/300x200/112240/64ffda?text=Electrochemistry',
                    url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4',
                    teacher: 'دکتر علی احمدی',
                    likes: 112
                }
            ];
        }

        let currentVideoIndex = 0;

        function loadVideos() {
            const playlistContainer = document.getElementById('video-playlist-items');
            const uploadSection = document.getElementById('upload-section');
            
            // نمایش بخش آپلود برای مدرس
            if (currentUser && currentUser.role === 'teacher') {
                uploadSection.style.display = 'block';
            } else {
                uploadSection.style.display = 'none';
            }
            
            // ایجاد پلی‌لیست
            playlistContainer.innerHTML = '';
            videos.forEach((video, index) => {
                const item = document.createElement('div');
                item.className = `playlist-item ${index === currentVideoIndex ? 'active' : ''}`;
                item.innerHTML = `
                    <div style="margin-left: 15px;">
                        <i class="fas fa-play-circle" style="color: var(--accent-blue); font-size: 1.2rem;"></i>
                    </div>
                    <div style="flex: 1;">
                        <div style="font-weight: 500; color: var(--text-primary);">${video.title}</div>
                        <div style="color: var(--text-muted); font-size: 0.9rem; margin-top: 5px;">
                            <span><i class="fas fa-clock"></i> ${video.duration}</span>
                            <span style="margin-right: 15px;"><i class="fas fa-eye"></i> ${video.views.toLocaleString()}</span>
                            <span><i class="fas fa-heart" style="color: var(--accent-red);"></i> ${video.likes}</span>
                        </div>
                    </div>
                `;
                
                item.addEventListener('click', () => {
                    playVideo(index);
                });
                
                playlistContainer.appendChild(item);
            });
            
            // پخش اولین ویدیو
            if (videos.length > 0) {
                playVideo(0);
            }
        }

        function playVideo(index) {
            currentVideoIndex = index;
            const video = videos[index];
            
            document.getElementById('current-video-title').textContent = video.title;
            document.getElementById('video-source').src = video.url;
            const videoElement = document.getElementById('main-video');
            videoElement.load();
            videoElement.play();
            
            // افزایش تعداد بازدیدها
            video.views++;
            localStorage.setItem('chemistryVideos', JSON.stringify(videos));
            
            // به‌روزرسانی پلی‌لیست
            document.querySelectorAll('.playlist-item').forEach((item, i) => {
                item.classList.toggle('active', i === index);
            });
            
            // ثبت مشاهده ویدیو برای کاربر
            if (currentUser && currentUser.role === 'student') {
                if (!currentUser.progress.watchedVideos.includes(video.id)) {
                    currentUser.progress.watchedVideos.push(video.id);
                    currentUser.progress.score += 10; // 10 امتیاز برای هر ویدیو
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    
                    // به‌روزرسانی لیست کاربران
                    const userIndex = users.findIndex(u => u.id === currentUser.id);
                    if (userIndex !== -1) {
                        users[userIndex] = currentUser;
                        localStorage.setItem('chemistryUsers', JSON.stringify(users));
                    }
                }
            }
        }

        function previousVideo() {
            if (currentVideoIndex > 0) {
                playVideo(currentVideoIndex - 1);
            } else {
                playVideo(videos.length - 1); // رفتن به آخرین ویدیو
            }
        }

        function nextVideo() {
            if (currentVideoIndex < videos.length - 1) {
                playVideo(currentVideoIndex + 1);
            } else {
                playVideo(0); // رفتن به اولین ویدیو
            }
        }

        // =================== سیستم جدول تناوبی (1-118) ===================
        const elements1to118 = [
            {symbol: "H", name: "هیدروژن", number: 1, mass: 1.01, type: "نافلز", group: "nonmetal", color: "بی‌رنگ", state: "گاز", electrons: "1s¹"},
            {symbol: "He", name: "هلیوم", number: 2, mass: 4.00, type: "گاز نجیب", group: "noble-gas", color: "بی‌رنگ", state: "گاز", electrons: "1s²"},
            {symbol: "Li", name: "لیتیم", number: 3, mass: 6.94, type: "فلز قلیایی", group: "alkali-metal", color: "نقره‌ای", state: "جامد", electrons: "1s² 2s¹"},
            {symbol: "Be", name: "بریلیم", number: 4, mass: 9.01, type: "فلز قلیایی خاکی", group: "alkaline-earth", color: "خاکستری", state: "جامد", electrons: "1s² 2s²"},
            {symbol: "B", name: "بور", number: 5, mass: 10.81, type: "شبه فلز", group: "metalloid", color: "مشکی", state: "جامد", electrons: "1s² 2s² 2p¹"},
            {symbol: "C", name: "کربن", number: 6, mass: 12.01, type: "نافلز", group: "nonmetal", color: "مشکی", state: "جامد", electrons: "1s² 2s² 2p²"},
            {symbol: "N", name: "نیتروژن", number: 7, mass: 14.01, type: "نافلز", group: "nonmetal", color: "بی‌رنگ", state: "گاز", electrons: "1s² 2s² 2p³"},
            {symbol: "O", name: "اکسیژن", number: 8, mass: 16.00, type: "نافلز", group: "nonmetal", color: "بی‌رنگ", state: "گاز", electrons: "1s² 2s² 2p⁴"},
            {symbol: "F", name: "فلوئور", number: 9, mass: 19.00, type: "هالوژن", group: "halogen", color: "زرد کمرنگ", state: "گاز", electrons: "1s² 2s² 2p⁵"},
            {symbol: "Ne", name: "نئون", number: 10, mass: 20.18, type: "گاز نجیب", group: "noble-gas", color: "بی‌رنگ", state: "گاز", electrons: "1s² 2s² 2p⁶"},
            {symbol: "Na", name: "سدیم", number: 11, mass: 22.99, type: "فلز قلیایی", group: "alkali-metal", color: "نقره‌ای", state: "جامد", electrons: "[Ne] 3s¹"},
            {symbol: "Mg", name: "منیزیم", number: 12, mass: 24.31, type: "فلز قلیایی خاکی", group: "alkaline-earth", color: "نقره‌ای", state: "جامد", electrons: "[Ne] 3s²"},
            {symbol: "Al", name: "آلومینیوم", number: 13, mass: 26.98, type: "فلز", group: "basic-metal", color: "نقره‌ای", state: "جامد", electrons: "[Ne] 3s² 3p¹"},
            {symbol: "Si", name: "سیلیسیم", number: 14, mass: 28.09, type: "شبه فلز", group: "metalloid", color: "خاکستری", state: "جامد", electrons: "[Ne] 3s² 3p²"},
            {symbol: "P", name: "فسفر", number: 15, mass: 30.97, type: "نافلز", group: "nonmetal", color: "بی‌رنگ/قرمز/سیاه", state: "جامد", electrons: "[Ne] 3s² 3p³"},
            {symbol: "S", name: "گوگرد", number: 16, mass: 32.07, type: "نافلز", group: "nonmetal", color: "زرد", state: "جامد", electrons: "[Ne] 3s² 3p⁴"},
            {symbol: "Cl", name: "کلر", number: 17, mass: 35.45, type: "هالوژن", group: "halogen", color: "زرد مایل به سبز", state: "گاز", electrons: "[Ne] 3s² 3p⁵"},
            {symbol: "Ar", name: "آرگون", number: 18, mass: 39.95, type: "گاز نجیب", group: "noble-gas", color: "بی‌رنگ", state: "گاز", electrons: "[Ne] 3s² 3p⁶"},
            {symbol: "K", name: "پتاسیم", number: 19, mass: 39.10, type: "فلز قلیایی", group: "alkali-metal", color: "نقره‌ای", state: "جامد", electrons: "[Ar] 4s¹"},
            {symbol: "Ca", name: "کلسیم", number: 20, mass: 40.08, type: "فلز قلیایی خاکی", group: "alkaline-earth", color: "نقره‌ای", state: "جامد", electrons: "[Ar] 4s²"},
            {symbol: "Fe", name: "آهن", number: 26, mass: 55.85, type: "فلز واسطه", group: "transition-metal", color: "خاکستری", state: "جامد", electrons: "[Ar] 4s² 3d⁶"},
            {symbol: "Cu", name: "مس", number: 29, mass: 63.55, type: "فلز واسطه", group: "transition-metal", color: "قرمز متمایل به نارنجی", state: "جامد", electrons: "[Ar] 4s¹ 3d¹⁰"},
            {symbol: "Zn", name: "روی", number: 30, mass: 65.38, type: "فلز واسطه", group: "transition-metal", color: "خاکستری مایل به آبی", state: "جامد", electrons: "[Ar] 4s² 3d¹⁰"},
            {symbol: "Br", name: "برم", number: 35, mass: 79.90, type: "هالوژن", group: "halogen", color: "قرمز مایل به قهوه‌ای", state: "مایع", electrons: "[Ar] 4s² 3d¹⁰ 4p⁵"},
            {symbol: "Ag", name: "نقره", number: 47, mass: 107.87, type: "فلز واسطه", group: "transition-metal", color: "نقره‌ای", state: "جامد", electrons: "[Kr] 5s¹ 4d¹⁰"},
            {symbol: "I", name: "ید", number: 53, mass: 126.90, type: "هالوژن", group: "halogen", color: "بنفش", state: "جامد", electrons: "[Kr] 5s² 4d¹⁰ 5p⁵"},
            {symbol: "Au", name: "طلا", number: 79, mass: 197.00, type: "فلز واسطه", group: "transition-metal", color: "طلایی", state: "جامد", electrons: "[Xe] 6s¹ 4f¹⁴ 5d¹⁰"},
            {symbol: "Hg", name: "جیوه", number: 80, mass: 200.59, type: "فلز واسطه", group: "transition-metal", color: "نقره‌ای", state: "مایع", electrons: "[Xe] 6s² 4f¹⁴ 5d¹⁰"},
            {symbol: "Pb", name: "سرب", number: 82, mass: 207.20, type: "فلز", group: "basic-metal", color: "خاکستری", state: "جامد", electrons: "[Xe] 6s² 4f¹⁴ 5d¹⁰ 6p²"},
            {symbol: "U", name: "اورانیم", number: 92, mass: 238.03, type: "آکتینید", group: "actinide", color: "نقره‌ای", state: "جامد", electrons: "[Rn] 7s² 5f³ 6d¹"}
        ];

        function loadPeriodicTable() {
            const container = document.getElementById('periodic-table-container');
            container.innerHTML = '';
            
            // خانه‌های خالی برای جدول
            const emptyCells = [0, 1, 16, 17]; // موقعیت‌های خالی در ردیف اول
            for (let i = 0; i < 18; i++) {
                const cell = document.createElement('div');
                if (emptyCells.includes(i)) {
                    cell.style.visibility = 'hidden';
                }
                container.appendChild(cell);
            }
            
            // اضافه کردن عناصر
            elements1to118.forEach(element => {
                const elementDiv = document.createElement('div');
                elementDiv.className = `periodic-element ${element.group}`;
                elementDiv.innerHTML = `
                    <div class="element-image">
                        ${element.symbol}
                    </div>
                    <div style="font-weight: bold; font-size: 0.9rem; margin-bottom: 3px;">${element.symbol}</div>
                    <div style="font-size: 0.7rem;">${element.number}</div>
                    <div style="font-size: 0.6rem; margin-top: 3px;">${element.name}</div>
                `;
                
                elementDiv.addEventListener('click', () => {
                    showElementModal(element);
                });
                
                container.appendChild(elementDiv);
            });
        }

        function loadMolarMassElements() {
            const container = document.getElementById('all-elements-grid');
            container.innerHTML = '';
            
            elements1to118.forEach(element => {
                const elementItem = document.createElement('div');
                elementItem.className = 'element-item';
                elementItem.innerHTML = `
                    <div class="element-symbol">${element.symbol}</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary);">
                        <strong>${element.name}</strong><br>
                        عدد اتمی: ${element.number}<br>
                        جرم مولی: ${element.mass} g/mol
                    </div>
                `;
                
                elementItem.addEventListener('click', () => {
                    showElementModal(element);
                });
                
                container.appendChild(elementItem);
            });
        }

        function showElementModal(element) {
            const modalContent = document.getElementById('modal-content');
            modalContent.innerHTML = `
                <div style="display: flex; align-items: center; margin-bottom: 25px; padding-bottom: 15px; border-bottom: 2px solid var(--accent-blue);">
                    <div class="element-image ${element.group}" style="width: 80px; height: 80px; font-size: 2rem; margin-left: 20px;">
                        ${element.symbol}
                    </div>
                    <div>
                        <h2 style="color: var(--accent-blue); margin-bottom: 5px;">${element.name} (${element.symbol})</h2>
                        <p style="color: var(--text-secondary);">عدد اتمی: ${element.number} | جرم اتمی: ${element.mass}</p>
                        <p style="color: var(--text-secondary);">نوع: ${element.type} | حالت: ${element.state}</p>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div style="background-color: var(--light-blue); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--accent-blue); margin-bottom: 15px; font-size: 1.2rem;">اطلاعات کلی</h4>
                        <p><strong>عدد اتمی:</strong> ${element.number}</p>
                        <p><strong>جرم اتمی:</strong> ${element.mass} g/mol</p>
                        <p><strong>نوع:</strong> ${element.type}</p>
                        <p><strong>حالت:</strong> ${element.state}</p>
                    </div>
                    
                    <div style="background-color: var(--light-blue); padding: 20px; border-radius: 10px;">
                        <h4 style="color: var(--accent-blue); margin-bottom: 15px; font-size: 1.2rem;">ساختار اتمی</h4>
                        <p><strong>آرایش الکترونی:</strong> ${element.electrons}</p>
                        <p><strong>گروه جدول تناوبی:</strong> ${getGroupName(element.group)}</p>
                        <p><strong>رنگ:</strong> ${element.color}</p>
                    </div>
                </div>
                
                <div style="background-color: rgba(100, 255, 218, 0.1); padding: 20px; border-radius: 10px; border-right: 3px solid var(--accent-blue);">
                    <h4 style="color: var(--accent-blue); margin-bottom: 10px;">نکات کنکوری ${element.name}:</h4>
                    <p style="color: var(--text-secondary);">${getElementTips(element)}</p>
                </div>
            `;
            
            document.getElementById('element-modal').style.display = 'flex';
        }

        function getGroupName(groupClass) {
            const groups = {
                'alkali-metal': 'فلزات قلیایی',
                'alkaline-earth': 'فلزات قلیایی خاکی',
                'transition-metal': 'فلزات واسطه',
                'basic-metal': 'فلزات اصلی',
                'metalloid': 'شبه فلزات',
                'nonmetal': 'نافلزات',
                'halogen': 'هالوژن‌ها',
                'noble-gas': 'گازهای نجیب',
                'lanthanide': 'لانتانیدها',
                'actinide': 'آکتینیدها'
            };
            return groups[groupClass] || groupClass;
        }

        function getElementTips(element) {
            const tips = {
                "H": "• سبک‌ترین عنصر • فراوان‌ترین عنصر جهان • در ترکیب آب (H₂O) • نافلز",
                "He": "• سبک‌ترین گاز نجیب • در بالون‌ها استفاده می‌شود • نقطه جوش بسیار پایین",
                "Li": "• سبک‌ترین فلز • در باتری‌های لیتیومی • واکنش‌پذیر با آب",
                "C": "• چهارظرفیتی • پایه شیمی آلی • آلوتروپ‌های الماس و گرافیت",
                "O": "• فراوان‌ترین عنصر پوسته زمین • برای تنفس ضروری • اکسیدکننده قوی",
                "Na": "• در نمک طعام (NaCl) • نور زرد در تست شعله • واکنش شدید با آب",
                "Cl": "• گاز زرد مایل به سبز • در ضدعفونی آب • تشکیل نمک با سدیم",
                "Fe": "• چهارمین عنصر فراوان • در هموگلوبین خون • مغناطیسی • زنگ می‌زند",
                "Cu": "• رسانای عالی برق • رنگ قرمز متمایز • در سیم‌های برق",
                "Au": "• فلز نجیب • در جواهرات • رسانای عالی • ضدزنگ"
            };
            
            return tips[element.symbol] || `• عنصر ${element.type} • عدد اتمی: ${element.number} • جرم مولی: ${element.mass} g/mol`;
        }

        // =================== سیستم آزمون آنلاین ===================
        const quizQuestions = [
            {
                question: "کدام عنصر در گروه هالوژن‌ها قرار دارد؟",
                options: ["سدیم (Na)", "کلر (Cl)", "کلسیم (Ca)", "آهن (Fe)"],
                correct: 1,
                explanation: "کلر (Cl) در گروه ۱۷ جدول تناوبی قرار دارد که همان گروه هالوژن‌ها است."
            },
            {
                question: "جرم مولی آب (H₂O) چند گرم بر مول است؟",
                options: ["16 g/mol", "18 g/mol", "20 g/mol", "22 g/mol"],
                correct: 1,
                explanation: "جرم مولی آب = (۲ × ۱) + ۱۶ = ۱۸ گرم بر مول"
            },
            {
                question: "واکنش احتراق متان چگونه است؟",
                options: [
                    "CH₄ + ۲O₂ → CO₂ + ۲H₂O",
                    "۲H₂ + O₂ → ۲H₂O", 
                    "N₂ + ۳H₂ → ۲NH₃",
                    "C + O₂ → CO₂"
                ],
                correct: 0,
                explanation: "واکنش کامل احتراق متان: CH₄ + ۲O₂ → CO₂ + ۲H₂O"
            },
            {
                question: "عدد اتمی کربن چند است؟",
                options: ["4", "6", "12", "14"],
                correct: 1,
                explanation: "کربن دارای ۶ پروتون و بنابراین عدد اتمی ۶ دارد."
            },
            {
                question: "کدام یک از موارد زیر یک گاز نجیب است؟",
                options: ["هیدروژن (H)", "اکسیژن (O)", "نئون (Ne)", "نیتروژن (N)"],
                correct: 2,
                explanation: "نئون در گروه ۱۸ جدول تناوبی قرار دارد که گازهای نجیب هستند."
            },
            {
                question: "پیل گالوانی کدام نوع انرژی را تولید می‌کند؟",
                options: ["انرژی شیمیایی به گرمایی", "انرژی شیمیایی به الکتریکی", "انرژی الکتریکی به شیمیایی", "انرژی گرمایی به مکانیکی"],
                correct: 1,
                explanation: "پیل گالوانی انرژی شیمیایی را به انرژی الکتریکی تبدیل می‌کند."
            },
            {
                question: "pH محلول خنثی در دمای ۲۵ درجه سانتی‌گراد چند است؟",
                options: ["0", "7", "14", "10"],
                correct: 1,
                explanation: "در دمای ۲۵ درجه سانتی‌گراد، pH محلول خنثی برابر ۷ است."
            }
        ];

        let currentQuizQuestion = 0;
        let quizScore = 0;
        let userQuizAnswers = new Array(quizQuestions.length).fill(-1);

        function loadQuiz() {
            const container = document.getElementById('quiz-container');
            const resultBox = document.getElementById('result-box');
            
            container.innerHTML = `
                <div class="quiz-progress">
                    <div>
                        <h3 id="question-number">سوال ۱ از ${quizQuestions.length}</h3>
                        <p style="color: var(--text-muted);" id="timer">زمان: ۳۰:۰۰</p>
                    </div>
                    <div>
                        <span style="color: var(--accent-blue); font-weight: bold;" id="score">امتیاز: ۰</span>
                    </div>
                </div>
                
                <div class="question-box">
                    <h3 id="question-text">${quizQuestions[0].question}</h3>
                </div>
                
                <div class="options-container" id="options-container">
                    ${quizQuestions[0].options.map((option, index) => `
                        <div class="option" onclick="selectQuizOption(${index})">
                            <span style="font-weight: bold; margin-left: 10px;">${String.fromCharCode(65 + index)}.</span>
                            <span>${option}</span>
                        </div>
                    `).join('')}
                </div>
                
                <div class="quiz-controls">
                    <button class="btn" id="prev-btn" onclick="prevQuizQuestion()">سوال قبلی</button>
                    <button class="btn" id="next-btn" onclick="nextQuizQuestion()">سوال بعدی</button>
                    <button class="btn" style="background-color: var(--accent-green);" onclick="submitQuiz()">پایان آزمون</button>
                </div>
            `;
            
            resultBox.innerHTML = `
                <h2 style="color: var(--accent-blue); margin-bottom: 20px;">نتیجه آزمون</h2>
                <div style="font-size: 4rem; color: var(--accent-green); margin: 20px 0;" id="final-score">۰٪</div>
                <h3 id="result-message">در حال محاسبه...</h3>
                <p style="color: var(--text-secondary); margin: 20px 0;" id="result-details">
                    شما به ۰ سوال از ${quizQuestions.length} سوال پاسخ صحیح دادید.
                </p>
                <div style="display: flex; gap: 15px; justify-content: center; margin-top: 30px;">
                    <button class="btn" onclick="restartQuiz()">آزمون مجدد</button>
                    <button class="btn" onclick="showQuizAnswers()">مشاهده پاسخ‌ها</button>
                </div>
            `;
            
            updateQuizUI();
        }

        function selectQuizOption(optionIndex) {
            userQuizAnswers[currentQuizQuestion] = optionIndex;
            updateQuizUI();
        }

        function updateQuizUI() {
            const question = quizQuestions[currentQuizQuestion];
            document.getElementById('question-number').textContent = `سوال ${currentQuizQuestion + 1} از ${quizQuestions.length}`;
            document.getElementById('question-text').textContent = question.question;
            document.getElementById('score').textContent = `امتیاز: ${quizScore}`;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.classList.remove('selected');
                if (userQuizAnswers[currentQuizQuestion] === index) {
                    option.classList.add('selected');
                }
            });
            
            document.getElementById('prev-btn').style.display = currentQuizQuestion === 0 ? 'none' : 'inline-block';
            document.getElementById('next-btn').textContent = currentQuizQuestion === quizQuestions.length - 1 ? 'اتمام' : 'سوال بعدی';
        }

        function nextQuizQuestion() {
            if (currentQuizQuestion < quizQuestions.length - 1) {
                currentQuizQuestion++;
                updateQuizUI();
            } else {
                submitQuiz();
            }
        }

        function prevQuizQuestion() {
            if (currentQuizQuestion > 0) {
                currentQuizQuestion--;
                updateQuizUI();
            }
        }

        function submitQuiz() {
            let correctAnswers = 0;
            quizQuestions.forEach((q, index) => {
                if (userQuizAnswers[index] === q.correct) {
                    correctAnswers++;
                }
            });
            
            const percentage = Math.round((correctAnswers / quizQuestions.length) * 100);
            quizScore = correctAnswers * 10; // 10 امتیاز برای هر پاسخ صحیح
            
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('result-box').style.display = 'block';
            document.getElementById('final-score').textContent = `${percentage}٪`;
            
            let message = '';
            if (percentage >= 90) {
                message = '🏆 عالی! شما استعداد فوق‌العاده‌ای در شیمی دارید.';
            } else if (percentage >= 70) {
                message = '👍 خیلی خوب! دانش شیمی شما در سطح قابل قبولی است.';
            } else if (percentage >= 50) {
                message = '👌 قابل قبول. نیاز به مطالعه بیشتر دارید.';
            } else {
                message = '📚 نیاز به تمرین و مطالعه بیشتری دارید.';
            }
            
            document.getElementById('result-message').textContent = message;
            document.getElementById('result-details').textContent = 
                `شما به ${correctAnswers} سوال از ${quizQuestions.length} سوال پاسخ صحیح دادید.`;
            
            // ذخیره نتایج برای کاربر
            if (currentUser) {
                currentUser.progress.completedQuizzes.push({
                    date: new Date().toLocaleDateString('fa-IR'),
                    score: percentage,
                    totalQuestions: quizQuestions.length,
                    correctAnswers: correctAnswers
                });
                currentUser.progress.correctAnswers += correctAnswers;
                currentUser.progress.totalQuestions += quizQuestions.length;
                currentUser.progress.score += quizScore;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                
                // به‌روزرسانی لیست کاربران
                const userIndex = users.findIndex(u => u.id === currentUser.id);
                if (userIndex !== -1) {
                    users[userIndex] = currentUser;
                    localStorage.setItem('chemistryUsers', JSON.stringify(users));
                }
            }
        }

        function restartQuiz() {
            currentQuizQuestion = 0;
            quizScore = 0;
            userQuizAnswers.fill(-1);
            document.getElementById('quiz-container').style.display = 'block';
            document.getElementById('result-box').style.display = 'none';
            loadQuiz();
        }

        function showQuizAnswers() {
            let answersText = '📝 پاسخ‌های صحیح آزمون:\n\n';
            quizQuestions.forEach((q, index) => {
                answersText += `${index + 1}. ${q.question}\n`;
                answersText += `✅ پاسخ صحیح: ${q.options[q.correct]}\n`;
                answersText += `📖 توضیح: ${q.explanation}\n`;
                answersText += `✏️ پاسخ شما: ${userQuizAnswers[index] !== -1 ? q.options[userQuizAnswers[index]] : 'پاسخی نداده‌اید'}\n\n`;
            });
            alert(answersText);
        }

        // =================== سیستم گالری عکس‌ها ===================
        const galleryItems = [
            {
                title: "کلاس حضوری تهران",
                description: "اردیبهشت ۱۴۰۲ - آموزشگاه فرهیختگان",
                icon: "fas fa-chalkboard-teacher",
                color: "var(--accent-blue)"
            },
            {
                title: "کارگاه حل تمرین",
                description: "شهریور ۱۴۰۲ - دانش‌آموزان رتبه برتر",
                icon: "fas fa-users",
                color: "var(--accent-green)"
            },
            {
                title: "جشن فارغ‌التحصیلی",
                description: "تیر ۱۴۰۲ - دوره آنلاین تابستانه",
                icon: "fas fa-graduation-cap",
                color: "var(--accent-yellow)"
            },
            {
                title: "آزمون آزمایشی",
                description: "دی ۱۴۰۲ - آزمون جامع نیمسال اول",
                icon: "fas fa-clipboard-check",
                color: "var(--accent-purple)"
            },
            {
                title: "کارگاه عملی شیمی",
                description: "آبان ۱۴۰۲ - آزمایشگاه شیمی",
                icon: "fas fa-vial",
                color: "var(--accent-red)"
            },
            {
                title: "جلسه مشاوره",
                description: "اسفند ۱۴۰۲ - برنامه‌ریزی کنکور",
                icon: "fas fa-comments",
                color: "var(--accent-orange)"
            }
        ];

        function loadGallery() {
            const container = document.getElementById('gallery-container');
            container.innerHTML = '';
            
            galleryItems.forEach(item => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                galleryItem.innerHTML = `
                    <div class="gallery-image" style="color: ${item.color};">
                        <i class="${item.icon}"></i>
                    </div>
                    <div class="gallery-caption" style="padding: 20px; text-align: center;">
                        <h3>${item.title}</h3>
                        <p style="color: var(--text-secondary);">${item.description}</p>
                    </div>
                `;
                container.appendChild(galleryItem);
            });
        }

        // =================== سیستم رفع اشکال ===================
        function loadHelpSection() {
            const form = document.getElementById('question-form');
            form.innerHTML = `
                <div class="form-group">
                    <label for="name">نام و نام خانوادگی:</label>
                    <input type="text" id="name" class="form-control" placeholder="نام خود را وارد کنید" required value="${currentUser ? currentUser.name : ''}">
                </div>
                
                <div class="form-group">
                    <label for="phone">شماره تماس:</label>
                    <input type="tel" id="phone" class="form-control" placeholder="۰۹۱۲XXXXXXX" required value="${currentUser ? currentUser.phone : ''}">
                </div>
                
                <div class="form-group">
                    <label for="subject">موضوع سوال:</label>
                    <select id="subject" class="form-control" required>
                        <option value="">موضوع را انتخاب کنید</option>
                        <option value="ساختار اتم">ساختار اتم</option>
                        <option value="جدول تناوبی">جدول تناوبی</option>
                        <option value="پیوندهای شیمیایی">پیوندهای شیمیایی</option>
                        <option value="استوکیومتری">استوکیومتری</option>
                        <option value="ترمودینامیک">ترمودینامیک</option>
                        <option value="سینتیک">سینتیک</option>
                        <option value="تعادل شیمیایی">تعادل شیمیایی</option>
                        <option value="اسید و باز">اسید و باز</option>
                        <option value="الکتروشیمی">الکتروشیمی</option>
                        <option value="شیمی آلی">شیمی آلی</option>
                        <option value="سایر">سایر</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="question">سوال خود را بنویسید:</label>
                    <textarea id="question" class="form-control" placeholder="سوال شیمی خود را به طور کامل شرح دهید..." required></textarea>
                </div>
                
                <button type="submit" class="submit-btn">
                    <i class="fas fa-paper-plane"></i> ارسال سوال
                </button>
            `;
            
            // اضافه کردن دکمه مشاهده سوالات برای مدرس
            if (currentUser && currentUser.role === 'teacher') {
                const helpSection = document.querySelector('.help-section');
                const viewQuestionsBtn = document.createElement('button');
                viewQuestionsBtn.className = 'btn';
                viewQuestionsBtn.style.cssText = 'margin-top: 20px; width: 100%; background-color: var(--accent-orange);';
                viewQuestionsBtn.innerHTML = '<i class="fas fa-question-circle"></i> مشاهده سوالات دانش‌آموزان';
                viewQuestionsBtn.onclick = showQuestionsPanel;
                helpSection.appendChild(viewQuestionsBtn);
            }
        }

        document.getElementById('question-form')?.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!currentUser) {
                alert('لطفاً ابتدا وارد حساب کاربری خود شوید.');
                showPage('auth');
                return;
            }
            
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const subject = document.getElementById('subject').value;
            const question = document.getElementById('question').value;
            
            if (!name || !phone || !subject || !question) {
                alert('لطفا تمام فیلدها را پر کنید.');
                return;
            }
            
            const newQuestion = {
                id: Date.now(),
                studentName: name,
                studentId: currentUser.id,
                phone: phone,
                subject: subject,
                question: question,
                date: new Date().toLocaleString('fa-IR'),
                status: 'جدید',
                answer: '',
                answerDate: '',
                answeredBy: '',
                priority: 'متوسط'
            };
            
            studentQuestions.push(newQuestion);
            localStorage.setItem('chemistryQuestions', JSON.stringify(studentQuestions));
            
            alert(`✅ سوال شما با موفقیت ثبت شد!\n\n📋 کد پیگیری: ${newQuestion.id}\n\nپاسخ شما حداکثر طی ۲۴ ساعت ارسال خواهد شد.`);
            document.getElementById('question-form').reset();
        });

        // =================== توابع کمکی ===================
        function scrollToCategory(categoryId) {
            const element = document.getElementById(categoryId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function closeModal() {
            document.getElementById('element-modal').style.display = 'none';
        }

        // بستن مدال با کلیک خارج
        document.getElementById('element-modal')?.addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // بستن مدال با دکمه
        document.getElementById('close-modal')?.addEventListener('click', closeModal);

        // =================== راه‌اندازی اولیه ===================
        document.addEventListener('DOMContentLoaded', function() {
            updateNavForUser();
            initializeQuestionManagement();
            updateDashboard();
            
            // راه‌اندازی آزمون
            if (document.getElementById('quiz')) {
                loadQuiz();
            }
            
            // نمایش صفحه اصلی
            showPage('home');
            
            // نمایش پیام خوش‌آمدگویی
            if (currentUser) {
                setTimeout(() => {
                    showWelcomeMessage(currentUser.name);
                }, 1000);
            }
        });
    </script>
</body>
</html>
